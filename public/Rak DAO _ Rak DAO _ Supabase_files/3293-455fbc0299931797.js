"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3293],{41051:function(e,r,s){s.d(r,{Z:function(){return i}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(56626).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},34800:function(e,r,s){s.d(r,{Z:function(){return i}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(56626).Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},91191:function(e,r,s){s.d(r,{Z:function(){return b}});var i=s(52322),t=s(34800),n=s(56626);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var a=s(40449),o=s(76626),c=s(38183);let d=e=>{let r;switch(e.status){case o.S.ACTIVE_HEALTHY:r="isHealthy";break;case o.S.GOING_DOWN:case o.S.PAUSING:r="isPausing";break;case o.S.INACTIVE:r="isPaused";break;case o.S.RESTORING:r="isRestoring";break;case o.S.UNKNOWN:case o.S.COMING_UP:r="isComingUp"}return r};var u=s(24990),g=s(44549),h=s(59489);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,n.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var p=s(41051);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,n.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var v=s(72860),j=s(12467),f=s(64039);let y=e=>{let{resourceWarnings:r,projectStatus:s}=e,t=(null==r?void 0:r.is_readonly_mode_enabled)?["is_readonly_mode_enabled"]:Object.keys(r||{}).filter(e=>"project"!==e&&"is_readonly_mode_enabled"!==e&&(null==r?void 0:r[e])!==null),n=t.some(e=>(null==r?void 0:r[e])==="critical"),l=t.includes("is_readonly_mode_enabled")||n,a=void 0!==r?(0,h.L)(r,t[0],"cardContent"):void 0,o="isPaused"===s?"Project is paused":"isPausing"===s?"Project is pausing":"isComingUp"===s?"Project is coming up":"isRestoring"===s?"Project is restoring":r?t.length>1?g.x.multiple_resource_warnings.cardContent[n?"critical":"warning"].title:null==a?void 0:a.title:void 0,c="isPaused"===s?"This project will not accept requests until resumed":"isPausing"===s?"The pause process will complete in a few minutes":"isComingUp"===s||"isRestoring"===s?"Your project will be ready in a few minutes":r?(t.length,null==a?void 0:a.description):void 0;return(0===t.length||void 0===a)&&"isHealthy"===s?null:(0,i.jsxs)(v.bZ,{variant:l?"destructive":"isPaused"===s?"default":"warning",className:(0,j.cn)("border-0 p-5 pb-[1.25rem]","bg-transparent","[&>svg]:left-[1.25rem] [&>svg]:top-3.5 [&>svg]:border",l?"":"[&>svg]:text-foreground [&>svg]:bg-surface-100"),children:["isPaused"===s||"isPausing"===s?(0,i.jsx)(f.Z,{strokeWidth:1.5,size:12}):"isRestoring"===s||"isComingUp"===s?(0,i.jsx)(x,{strokeWidth:1.5,size:12}):(0,i.jsx)(p.Z,{strokeWidth:1.5,size:12}),(0,i.jsxs)("div",{className:"flex justify-between items-center w-full gap-x-1",children:[(0,i.jsx)(v.Cd,{className:"text-xs mb-0",children:o}),(0,i.jsxs)(u.fC,{delayDuration:0,children:[(0,i.jsx)(u.xz,{children:(0,i.jsx)(m,{size:14,className:"text-foreground-light hover:text-foreground"})}),(0,i.jsx)(u.h_,{children:(0,i.jsxs)(u.VY,{side:"bottom",children:[(0,i.jsx)(u.Eh,{className:"radix-tooltip-arrow"}),(0,i.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border bg-studio w-[280px]",children:(0,i.jsx)("span",{className:"text-xs text-foreground",children:c})})]})})]})]})]})};var b=e=>{var r,s;let{project:n,rewriteHref:u,githubIntegration:g,vercelIntegration:h,resourceWarnings:x}=e,{name:p,ref:m}=n,v="".concat(n.cloud_provider," | ").concat(n.region),j=(null===(r=n.preview_branch_refs)||void 0===r?void 0:r.length)>0,f=null!==(s=null==g?void 0:g.metadata.name)&&void 0!==s?s:void 0,b=d(n);return(0,i.jsx)("li",{className:"list-none",children:(0,i.jsx)(a.Z,{linkHref:u||"/project/".concat(m),className:"h-44 !px-0 group pt-5 pb-0",title:(0,i.jsxs)("div",{className:"w-full justify-between space-y-1.5 px-5",children:[(0,i.jsx)("p",{className:"flex-shrink truncate text-sm pr-4",children:p}),(0,i.jsx)("span",{className:"text-sm lowercase text-foreground-light",children:v}),(0,i.jsxs)("div",{className:"flex items-center space-x-1.5",children:[void 0!==h&&(0,i.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center text-black dark:text-white",children:(0,i.jsx)(c.Z,{src:"".concat(o.GW,"/img/icons/vercel-icon.svg"),title:"Vercel Icon",className:"w-3"})}),j&&(0,i.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center",children:(0,i.jsx)(t.Z,{size:12,strokeWidth:1.5})}),void 0!==g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-fit p-1 border rounded-md flex items-center",children:(0,i.jsx)(l,{size:12,strokeWidth:1.5})}),(0,i.jsx)("p",{className:"text-xs !ml-2 text-foreground-light",children:f})]})]})]}),footer:(0,i.jsx)(y,{projectStatus:b,resourceWarnings:x})})})}},54717:function(e,r,s){var i=s(52322),t=s(40449);r.Z=()=>(0,i.jsx)(t.Z,{className:"h-44 !px-0 pt-5 pb-0",title:(0,i.jsxs)("div",{className:"w-full justify-between space-y-1.5 px-5",children:[(0,i.jsx)("p",{className:"flex-shrink truncate text-sm pr-4 shimmering-loader h-5 w-20"}),(0,i.jsx)("p",{className:"text-sm lowercase text-foreground-light h-4 w-40 shimmering-loader"})]})})},23293:function(e,r,s){s.d(r,{l:function(){return Z}});var i=s(52322),t=s(3440),n=s.n(t),l=s(39097),a=s.n(l),o=s(33105),c=s(88230),d=s(71681),u=s(22906),g=s(36492),h=s(49422),x=s(5604);async function p(e){let{data:r,error:s}=await (0,h.U2)("/platform/stripe/invoices/overdue",{signal:e});if(s)throw s;return r}let m=function(){let{enabled:e=!0,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,g.a)(x.Y.overdueInvoices(),e=>{let{signal:r}=e;return p(r)},{enabled:e,...r})};var v=s(5761),j=s(7226),f=s(92378),y=s(53091),b=s(76626),w=s(5388),N=s(27792),_=s(14279),k=s(91191),C=s(54717),Z=e=>{let{search:r,rewriteHref:s}=e,{data:t,isLoading:l,isSuccess:a}=(0,v.tl)(),{data:o,isLoading:d,isError:u,error:g}=(0,f.Sy)(),{isLoading:h,isError:x,error:p}=(0,j.j)(),{data:w}=(0,y.q)(),{data:N}=m({enabled:b.Qy}),_=n()(o,"organization_id"),k=!!b.Qy&&h,Z=r.length>0&&void 0!==o&&0===o.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.ref.includes(r.toLowerCase())).length;return l?(0,i.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,i.jsx)(C.Z,{}),(0,i.jsx)(C.Z,{})]}):Z?(0,i.jsx)(c.Z,{searchString:r}):a&&t&&(null==t?void 0:t.length)>0?(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.map(e=>(0,i.jsx)(P,{organization:e,projects:_[e.id],overdueInvoices:(null!=N?N:[]).filter(r=>r.organization_id===e.id),resourceWarnings:null!=w?w:[],rewriteHref:s,isLoadingPermissions:k,isErrorPermissions:x,permissionsError:p,isLoadingProjects:d,isErrorProjects:u,projectsError:g,search:r},e.id))}):(0,i.jsx)(z,{slug:""})};let P=e=>{let{organization:r,projects:s,overdueInvoices:t,resourceWarnings:n,isLoadingPermissions:l,isErrorPermissions:c,permissionsError:g,isLoadingProjects:h,isErrorProjects:x,projectsError:p,rewriteHref:m,search:v}=e,j=!s||0===s.length,f=[...s||[]].sort((e,r)=>e.name.localeCompare(r.name)),y=v.length>0?f.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.ref.includes(v.toLowerCase())):f,{data:b}=(0,u.T)({orgSlug:null==r?void 0:r.slug}),{data:_}=(0,d.q)({organizationId:null==r?void 0:r.id}),Z=null==_?void 0:_.map(e=>{var r,s,i,t,n;return{id:String(e.id),added_by:{id:String(null===(r=e.user)||void 0===r?void 0:r.id),primary_email:null!==(t=null===(s=e.user)||void 0===s?void 0:s.primary_email)&&void 0!==t?t:"",username:null!==(n=null===(i=e.user)||void 0===i?void 0:i.username)&&void 0!==n?n:""},foreign_project_id:String(e.repository.id),supabase_project_ref:e.project.ref,organization_integration_id:"unused",inserted_at:e.inserted_at,updated_at:e.updated_at,metadata:{name:e.repository.name}}}),P=null==b?void 0:b.filter(e=>"Vercel"===e.integration.name).flatMap(e=>e.connections);return v.length>0&&0===y.length?null:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,i.jsx)("h4",{className:"text-lg flex items-center",children:r.name}),!!t.length&&(0,i.jsx)("div",{children:(0,i.jsx)(N.z,{asChild:!0,type:"danger",children:(0,i.jsx)(a(),{href:"/org/".concat(r.slug,"/invoices"),children:"Outstanding Invoices"})})}),(null==r?void 0:r.restriction_status)==="grace_period"&&(0,i.jsx)("div",{children:(0,i.jsx)(N.z,{asChild:!0,type:"warning",children:(0,i.jsx)(a(),{href:"/org/".concat(r.slug,"/billing"),children:"Grace Period"})})}),(null==r?void 0:r.restriction_status)==="grace_period_over"&&(0,i.jsx)("div",{children:(0,i.jsx)(N.z,{asChild:!0,type:"warning",children:(0,i.jsx)(a(),{href:"/org/".concat(r.slug,"/billing"),children:"Grace Period Over"})})}),(null==r?void 0:r.restriction_status)==="restricted"&&(0,i.jsx)("div",{children:(0,i.jsx)(N.z,{asChild:!0,type:"danger",children:(0,i.jsx)(a(),{href:"/org/".concat(r.slug,"/billing"),children:"Services Restricted"})})})]}),l||h?(0,i.jsxs)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:[(0,i.jsx)(C.Z,{}),(0,i.jsx)(C.Z,{})]}):(0,i.jsx)("ul",{className:"mx-auto grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3",children:c?(0,i.jsx)("div",{className:"col-span-3",children:(0,i.jsx)(o.Z,{subject:"Failed to retrieve permissions for your account",error:g})}):x?(0,i.jsx)("div",{className:"col-span-3",children:(0,i.jsx)(o.Z,{subject:"Failed to retrieve projects under ".concat(name),error:p})}):j?(0,i.jsx)(z,{slug:r.slug}):null==y?void 0:y.map(e=>(0,i.jsx)(k.Z,{project:e,rewriteHref:m?m(e.ref):void 0,resourceWarnings:n.find(r=>r.project===e.ref),githubIntegration:null==Z?void 0:Z.find(r=>r.supabase_project_ref===e.ref),vercelIntegration:null==P?void 0:P.find(r=>r.supabase_project_ref===e.ref)},(0,w.pZ)(5)))})]},r.id)},z=e=>{let{slug:r}=e;return(0,i.jsxs)("div",{className:"col-span-4 space-y-4 rounded-lg border border-dashed p-6 text-center",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("p",{children:"No projects"}),(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Get started by creating a new project."})]}),(0,i.jsx)("div",{children:(0,i.jsx)(N.z,{asChild:!0,icon:(0,i.jsx)(_.Z,{}),children:(0,i.jsx)(a(),{href:"/new/".concat(r),children:"New Project"})})})]})}},88230:function(e,r,s){var i=s(52322),t=s(12467),n=s(27792);r.Z=e=>{let{searchString:r,onResetFilter:s,className:l}=e;return(0,i.jsxs)("div",{className:(0,t.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",l),children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',r,'" did not return any results']})]}),void 0!==s&&(0,i.jsx)(n.z,{type:"default",onClick:()=>s(),children:"Reset filter"})]})}},22906:function(e,r,s){s.d(r,{T:function(){return o}});var i=s(36492),t=s(71436),n=s(76626),l=s(93486);async function a(e,r){let{orgSlug:s}=e;if(!s)throw Error("orgSlug is required");let i=await (0,t.U2)("".concat(n.T5,"/integrations/").concat(s,"?expand=true"),{signal:r});if(i.error)throw i.error;return i}let o=function(e){let{orgSlug:r}=e,{enabled:s=!0,...t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(l.F.integrationsListWithOrg(r),e=>{let{signal:s}=e;return a({orgSlug:r},s)},{enabled:s&&void 0!==r,...t})}},5604:function(e,r,s){s.d(r,{Y:function(){return i}});let i={overdueInvoices:()=>["invoices","overdue"],invoice:e=>["invoice",e],list:(e,r,s)=>["invoices",e,r,s],count:(e,r)=>["invoices",e,r,"count"],projectInvoices:(e,r)=>["invoices",e,r],projectInvoicesCount:e=>["invoices",e,"count"],orgUpcomingPreview:e=>["invoices",e,"upcoming-preview"]}}}]);