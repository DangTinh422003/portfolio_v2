(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2281],{31458:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/general",function(){return r(16925)}])},47787:function(e,t,r){"use strict";r.d(t,{Y:function(){return n},w:function(){return s}});let s=.8,n=["Pricing","My project isn't getting traction","Poor customer service","Missing feature","I didn't see the value","Supabase didn't meet my needs","Dashboard is too complicated","Postgres is too complicated","Problem not solved","Too many bugs/issues","I decided to use something else","My work has finished/discontinued","Iâ€™m migrating to/starting a new project","None of the above"]},62870:function(e,t,r){"use strict";r.d(t,{S:function(){return l}});var s=r(48228),n=r(62202),a=r(71436),i=r(76626);async function o(e){let{projectRef:t,orgSlug:r,reasons:s,message:n,exitAction:o}=e,l=await (0,a.v_)("".concat(i.T5,"/feedback/downgrade"),{...void 0!==t&&{projectRef:t},...void 0!==r&&{orgSlug:r},reasons:s,additionalFeedback:n,exitAction:o});if(l.error)throw l.error;return l}let l=function(){let{onError:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.D)(e=>o(e),{async onError(t,r,s){void 0===e?n.ZP.error("Failed to submit exit survey: ".concat(t.message)):e(t,r,s)},...t})}},16925:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return e5}});var s=r(52322),n=r(59491),a=r(56839),i=r(39097),o=r.n(i),l=r(62202),c=r(72860),d=r(98938),u=r(53187),h=r(31840),m=r(66650),x=r(81476),p=r(27792),f=r(83314),j=r(27398),g=r(40068),v=r(54175),y=r(85945),b=r(48228),w=r(71436),N=r(76626),_=r(7145);async function k(e){let{ref:t,name:r}=e,s=await (0,w.r$)("".concat(N.T5,"/projects/").concat(t),{name:r});if(s.error)throw s.error;return s}let C=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>k(e),{async onSuccess(t,r,n){let{ref:a}=r;await Promise.all([s.invalidateQueries(_.i.list()),s.invalidateQueries(_.i.detail(a))]),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to update project: ".concat(e.message)):t(e,r,s)},...r})};var S=r(13096),P=r(24990),z=r(5632),Z=r(2784),O=r(49422);async function T(e){let{ref:t}=e,{data:r,error:s}=await (0,O.v_)("/platform/projects/{ref}/pause",{params:{path:{ref:t}}});if(s)throw s;return r}let E=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>T(e),{async onSuccess(t,r,s){await (null==e?void 0:e(t,r,s))},async onError(e,r,s){void 0===t?l.Am.error("Failed to pause project: ".concat(e.message)):t(e,r,s)},...r})};var A=r(92378),L=r(4646),D=r(13980),F=r.n(D);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var Y=(0,Z.forwardRef)(function(e,t){var r=e.color,s=e.size,n=void 0===s?24:s,a=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["color","size"]);return Z.createElement("svg",R({ref:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),Z.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),Z.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))});Y.propTypes={color:F().string,size:F().oneOfType([F().string,F().number])},Y.displayName="Pause";var q=r(83036),I=function(e){return(0,s.jsx)(q.Z,{icon:Y,...e})},W=r(83033),U=()=>{var e;let t=(0,z.useRouter)(),r=(0,y.NL)(),{project:a}=(0,f.d2)(),i=(0,S.lL)(),o=(0,f.gY)(),[c,d]=(0,Z.useState)(!1),u=null!==(e=null==a?void 0:a.ref)&&void 0!==e?e:"",h=(null==a?void 0:a.status)===N.S.INACTIVE,m=(0,S.Xo)(n.KA.INFRA_EXECUTE,"queue_jobs.projects.pause"),{data:x}=(0,L.G)({orgSlug:null==i?void 0:i.slug}),j=(null==x?void 0:x.plan.id)==="free",{mutate:g,isLoading:v}=E({onSuccess:(e,s)=>{(0,A.k7)(r,s.ref,N.S.PAUSING),l.ZP.success("Pausing project..."),t.push("/project/".concat(u))}}),b=!j||void 0===a||h||!m||!o;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.fC,{delayDuration:0,children:[(0,s.jsx)(P.xz,{asChild:!0,children:(0,s.jsx)(p.z,{type:"default",icon:(0,s.jsx)(I,{}),onClick:()=>d(!0),loading:v,disabled:b,children:"Pause Project"})}),b?(0,s.jsx)(P.h_,{children:(0,s.jsxs)(P.VY,{side:"bottom",children:[(0,s.jsx)(P.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:h?"Your project is already paused":m?o?j?"":"Projects on a paid plan will always be running":"Unable to pause project as project is not active":"You need additional permissions to pause this project"})})]})}):null]}),(0,s.jsx)(W.Z,{variant:"destructive",visible:c,loading:v,title:"Pause this project?",confirmLabel:"Pause project",confirmLabelLoading:"Pausing project",onCancel:()=>d(!1),onConfirm:()=>{if(!m)return l.ZP.error("You do not have the required permissions to pause this project");g({ref:u})},children:(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"Are you sure you want to pause this project? It will not be accessible until you unpause it."})})]})};async function X(e){let{ref:t}=e,{data:r,error:s}=await (0,O.v_)("/platform/projects/{ref}/restart",{params:{path:{ref:t}}});if(s)throw s;return r}let M=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>X(e),{async onSuccess(t,r,s){await (null==e?void 0:e(t,r,s))},async onError(e,r,s){void 0===t?l.Am.error("Failed to restart project: ".concat(e.message)):t(e,r,s)},...r})};async function V(e){let{ref:t,region:r,services:s=["postgresql"],source_notification_id:n}=e,{data:a,error:i}=await (0,O.v_)("/platform/projects/{ref}/restart-services",{params:{path:{ref:t}},body:{restartRequest:{region:r,services:s,source_notification_id:n}}});if(i)throw i;return a}let Q=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>V(e),{async onSuccess(t,r,s){await (null==e?void 0:e(t,r,s))},async onError(e,r,s){void 0===t?l.Am.error("Failed to restart project: ".concat(e.message)):t(e,r,s)},...r})};var B=r(40386),G=r(56599),K=r(70245),$=()=>{var e,t;let r=(0,z.useRouter)(),a=(0,y.NL)(),{project:i}=(0,f.d2)(),o=(0,f.gY)(),[c,d]=(0,Z.useState)(),u=null!==(e=null==i?void 0:i.ref)&&void 0!==e?e:"",h=null!==(t=null==i?void 0:i.region)&&void 0!==t?t:"",m=(0,S.Xo)(n.KA.INFRA_EXECUTE,"reboot"),{mutate:x,isLoading:j}=M({onSuccess:()=>{_()},onError:e=>{N(e,"project")}}),{mutate:g,isLoading:v}=Q({onSuccess:()=>{_()},onError:e=>{N(e,"database")}}),b=()=>{if(!m)return l.ZP.error("You do not have the required permissions to restart this project");x({ref:u})},w=async()=>{if(!m)return l.ZP.error("You do not have the required permissions to restart this project");g({ref:u,region:h,services:["postgresql"]})},N=(e,t)=>{l.ZP.error("Unable to restart ".concat(t,": ").concat(e.message)),d(void 0)},_=()=>{(0,A.Ob)(a,u,"OFFLINE"),l.ZP.success("Restarting server..."),r.push("/project/".concat(u)),d(void 0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.fC,{delayDuration:0,children:[(0,s.jsx)(P.xz,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.z,{type:"default",className:"px-3 ".concat(m&&o?"rounded-r-none":""),disabled:void 0===i||!m||!o,onClick:()=>d("project"),children:"Restart project"}),m&&o&&(0,s.jsxs)(B.h_,{children:[(0,s.jsx)(B.$F,{asChild:!0,children:(0,s.jsx)(p.z,{type:"default",className:"rounded-l-none px-[4px] py-[5px]",icon:(0,s.jsx)(G.Z,{}),disabled:!m})}),(0,s.jsx)(B.AW,{align:"end",side:"bottom",children:(0,s.jsx)(B.Xi,{disabled:j||v,onClick:()=>{d("database")},children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"block text-foreground",children:"Fast database reboot"}),(0,s.jsx)("p",{className:"block text-foreground-light",children:"Restarts only the database - faster but may not be able to recover from all failure modes"})]})},"database")})]})]})}),void 0!==i&&(!m||!o)&&(0,s.jsx)(P.h_,{children:(0,s.jsxs)(P.VY,{side:"bottom",children:[(0,s.jsx)(P.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:m?o?"":"Unable to restart project as project is not active":"You need additional permissions to restart this project"})})]})})]}),(0,s.jsx)(K.Z,{danger:!0,visible:void 0!==c,title:"Restart ".concat(c),description:(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to restart the"," ",(0,s.jsx)("span",{className:"text-foreground",children:c}),"? There will be a few minutes of downtime."]}),buttonLabel:"Restart",buttonLoadingLabel:"Restarting",onSelectCancel:()=>d(void 0),onSelectConfirm:async()=>{"project"===c?await b():"database"===c&&await w()}})]})},J=()=>{var e,t,r,i;let{project:y}=(0,f.d2)(),b=(0,S.lL)(),w=(0,S.P5)("v2AnnouncementUrl"),N=null==y?void 0:y.v2MaintenanceWindow,_=(null==N?void 0:N.start)?new Date(N.start).toUTCString().slice(0,16):void 0,k=null==N?void 0:null===(e=N.start)||void 0===e?void 0:e.substring(11,16),P=null==N?void 0:null===(t=N.end)||void 0===t?void 0:t.substring(11,16),z=(0,S.N$)(null==y?void 0:y.parent_project_ref),Z=void 0!==z,O="project-general-settings",T={name:null!==(r=null==y?void 0:y.name)&&void 0!==r?r:"",ref:null!==(i=null==y?void 0:y.ref)&&void 0!==i?i:""},E=(0,S.Xo)(n.KA.UPDATE,"projects",{resource:{project_id:null==y?void 0:y.id}}),{mutateAsync:A,isLoading:L}=C(),D=async(e,t)=>{let{resetForm:r}=t;if(!(null==y?void 0:y.ref))return console.error("Ref is required");try{let{name:t}=await A({ref:y.ref,name:e.name.trim()});r({values:{name:t},initialValues:{name:t}}),l.ZP.success("Successfully saved settings")}catch(e){}};return(0,s.jsxs)("div",{children:[(0,s.jsx)(j.ph,{title:"Project Settings",description:""}),Z&&(0,s.jsxs)(c.bZ,{variant:"default",className:"mb-6",children:[(0,s.jsx)(d.Z,{strokeWidth:2}),(0,s.jsx)(c.Cd,{children:"You are currently on a preview branch of your project"}),(0,s.jsxs)(c.X,{children:["Certain settings are not available while you're on a preview branch. To adjust your project settings, you may return to your"," ",(0,s.jsx)(o(),{href:"/project/".concat(z.ref,"/settings/general"),className:"text-brand",children:"main branch"}),"."]})]}),void 0===y?(0,s.jsx)(v.A,{}):(0,s.jsx)(u.Z,{id:O,initialValues:T,onSubmit:D,children:e=>{let{handleReset:t,values:r,initialValues:n}=e,a=JSON.stringify(r)!==JSON.stringify(n);return(0,s.jsx)(j.by,{disabled:!E,footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(j.iN,{form:O,isSubmitting:L,hasChanges:a,handleReset:t,helper:E?void 0:"You need additional permissions to manage this project's settings"})}),children:(0,s.jsx)(j.hj,{header:(0,s.jsx)(j.S0,{children:"General settings"}),children:(0,s.jsxs)(j.B4,{loading:!1,children:[(0,s.jsx)(h.Z,{id:"name",size:"small",label:"Project name",disabled:Z||!E}),(0,s.jsx)(h.Z,{copy:!0,disabled:!0,id:"ref",size:"small",label:"Reference ID"})]})})})}}),!Z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-6",id:"restart-project",children:(0,s.jsxs)(j.by,{children:[(0,s.jsxs)("div",{className:"flex flex-col px-8 py-4",children:[k&&P&&"https://"!==w&&(0,s.jsxs)(c.bZ,{variant:"warning",className:"mb-4",children:[(0,s.jsx)(d.Z,{strokeWidth:2}),(0,s.jsx)(c.Cd,{children:"Upcoming project restart scheduled"}),(0,s.jsxs)(c.X,{className:"flex flex-col gap-3",children:["This project will automatically restart on ",_," between"," ",k," and ",P," UTC, which will cause up to a few minutes of downtime.",(0,s.jsxs)(m.zF,{children:[(0,s.jsxs)(m.wy,{className:"text-foreground-light transition-all [&[data-state=open]&_svg]:rotate-90 hover:text-foreground data-[state=open]:text-foreground flex items-center gap-x-2 w-full",children:[(0,s.jsx)(a.Z,{className:"transition-transform",strokeWidth:1.5,size:14}),"Why this time?"]}),(0,s.jsx)(m.Fw,{children:"Your project has historically had the least database queries across the previous 10 weeks during this 30 minute window."})]}),"You may also manually restart this project anytime before"," ",_," ",k," UTC at a time that is convenient for you.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)("em",{children:[(0,s.jsx)("a",{href:w,target:"_blank",rel:"noreferrer",className:"underline",children:"Find out more"})," ","about our v2 platform architecture migration."]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:"Restart project"}),(0,s.jsx)("div",{className:"max-w-[420px]",children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project will not be available for a few minutes."})})]}),(0,s.jsx)($,{})]})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between px-8 py-4",id:"pause-project",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:"Pause project"}),(0,s.jsx)("div",{className:"max-w-[420px]",children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project will not be accessible while it is paused."})})]}),(0,s.jsx)(U,{})]})]})}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(g.Z,{children:(0,s.jsx)(g.Z.Content,{children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(x.Z,{strokeWidth:2}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:"Project usage statistics has been moved"}),(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"You may view your project's usage under your organization's settings"})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(p.z,{asChild:!0,type:"default",children:(0,s.jsx)(o(),{href:"/org/".concat(null==b?void 0:b.slug,"/usage?projectRef=").concat(null==y?void 0:y.ref),children:"View project usage"})})})]})})})})]})]})},H=r(82671),ee=r(48577),et=r(67959),er=r(72309);async function es(e){let{domain:t}=e,r=await fetch("https://1.1.1.1/dns-query?name=".concat(t,"&type=CNAME"),{method:"GET",headers:{accept:"application/dns-json"}}),s=await r.json();if(void 0===s.Answer)throw Error("Your CNAME record for ".concat(t," cannot be found - if you've just added the record, do check back in a bit."));return s.Answer.some(e=>5===e.type)}let en=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.D)(e=>es(e),{async onSuccess(t,r,s){await (null==e?void 0:e(t,r,s))},async onError(e,r,s){void 0===t?l.ZP.error("Failed to check CNAME record: ".concat(e.message)):t(e,r,s)},...r})};var ea=r(53463);async function ei(e){let{projectRef:t}=e,{data:r,error:s}=await (0,O.v_)("/v1/projects/{ref}/custom-hostname/activate",{params:{path:{ref:t}}});if(s)throw s;return r}let eo=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>ei(e),{async onSuccess(t,r,n){let{projectRef:a}=r;await s.invalidateQueries(ea.A.list(a)),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.ZP.error("Failed to activate custom domain: ".concat(e.message)):t(e,r,s)},...r})};async function el(e){let{projectRef:t}=e,{data:r,error:s}=await (0,O.IV)("/v1/projects/{ref}/custom-hostname",{params:{path:{ref:t}}});if(s)throw s;return r}let ec=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>el(e),{async onSuccess(t,r,n){let{projectRef:a}=r;s.setQueriesData(ea.A.list(a),()=>({customDomain:null,status:"0_no_hostname_configured"})),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to delete custom domain: ".concat(e.message)):t(e,r,s)},...r})};var ed=r(39127),eu=e=>{let{projectRef:t,customDomain:r}=e,[n,a]=(0,Z.useState)(!1),{data:i}=(0,et.q)({projectRef:t}),{mutate:u,isLoading:h}=en(),{mutate:m,isLoading:x}=eo({onSuccess:()=>{l.ZP.success("Successfully activated custom domain"),a(!1)}}),{mutate:f,isLoading:j}=ec(),v=null==i?void 0:i.autoApiService.endpoint,y=async()=>{if(!t)return console.error("Project ref is required");u({domain:r.hostname},{onSuccess:()=>m({projectRef:t})})},b=async()=>{if(!t)return console.error("Project ref is required");f({projectRef:t})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsxs)(g.Z.Content,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("h4",{className:"text-foreground",children:["Setup complete! Press activate to enable the custom domain"," ",(0,s.jsx)("code",{className:"text-sm",children:r.hostname})," for this project."]}),(0,s.jsx)("span",{className:"text-sm text-foreground-light",children:"We recommend that you schedule a downtime window of 20 - 30 minutes for your application, as you will need to update any services that need to know about your custom domain (e.g client side code or OAuth providers)"})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(c.bZ,{children:[(0,s.jsx)(d.Z,{className:"text-foreground-light",strokeWidth:1.5}),(0,s.jsx)(c.Cd,{children:"Remember to restore the original CNAME record from the first step before activating"}),(0,s.jsx)(c.X,{children:(0,s.jsxs)("p",{className:"col-span-12 text-sm lg:col-span-7 leading-6",children:["Set up a CNAME record for ",(0,s.jsx)("code",{className:"text-xs",children:r.hostname}),", resolving to"," ",v?(0,s.jsx)("code",{className:"text-xs",children:v}):"your project's API URL",", with as low a TTL as possible. If you're using Cloudflare as your DNS provider, disable the proxy option."]})})]})})]}),(0,s.jsx)("div",{className:"w-full border-t border-muted"}),(0,s.jsx)(g.Z.Content,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(p.z,{asChild:!0,type:"default",icon:(0,s.jsx)(ed.Z,{}),children:(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/custom-domains",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.z,{type:"default",onClick:b,loading:j,disabled:j,className:"self-end",children:"Cancel"}),(0,s.jsx)(p.z,{icon:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),disabled:j,onClick:()=>a(!0),className:"self-end",children:"Activate"})]})]})})]}),(0,s.jsx)(W.Z,{size:"small",loading:h||x,visible:n,title:(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to activate the custom domain"," ",(0,s.jsx)("code",{className:"text-sm",children:r.hostname})," for the project?"]}),confirmLabel:"Activate",confirmLabelLoading:"Activating",onCancel:()=>a(!1),onConfirm:y,children:(0,s.jsx)("p",{className:"text-sm",children:"The existing Supabase subdomain will be deactivated."})})]})},eh=r(21784),em=e=>{let{projectRef:t,customDomain:r}=e,[n,a]=(0,Z.useState)(!1),{mutate:i}=ec({onSuccess:()=>{l.ZP.success("Successfully deleted custom domain"),a(!1)}}),c=async()=>{if(!t)return console.error("Project ref is required");i({projectRef:t})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z.Content,{children:(0,s.jsxs)("div",{className:"w-full space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"Active custom domain:"}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("code",{className:"text-lg mx-0 flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-brand"}),(0,s.jsx)("span",{children:r.hostname})]})}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your custom domain is currently active and is serving traffic"})]})}),(0,s.jsx)("div",{className:"w-full border-t border-muted"}),(0,s.jsx)(g.Z.Content,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(p.z,{asChild:!0,type:"default",icon:(0,s.jsx)(ed.Z,{}),children:(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/custom-domains",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,s.jsx)(p.z,{type:"danger",icon:(0,s.jsx)(eh.Z,{}),onClick:()=>a(!0),children:"Delete Custom Domain"})]})}),(0,s.jsx)(K.Z,{danger:!0,visible:n,title:(0,s.jsxs)("div",{children:["Are you sure you want to delete the custom domain"," ",(0,s.jsx)("code",{className:"text-sm",children:r.hostname})," for the project?"]}),description:"Your custom domain will be deactivated. You will need to re-verify your domain if you want to use it again.",buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:()=>a(!1),onSelectConfirm:c})]})},ex=r(48601),ep=r(24459);async function ef(e){let{projectRef:t,customDomain:r}=e,{data:s,error:n}=await (0,O.v_)("/v1/projects/{ref}/custom-hostname/initialize",{params:{path:{ref:t}},body:{custom_hostname:r}});if(n)throw n;return s}let ej=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>ef(e),{async onSuccess(t,r,n){let{projectRef:a}=r;await s.invalidateQueries(ea.A.list(a)),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to create custom domain: ".concat(e.message)):t(e,r,s)},...r})},eg=ex.object({domain:ex.string().required("A value for your custom domain is required")});var ev=()=>{let{ref:e}=(0,ep.UO)(),{project:t}=(0,f.d2)(),{mutate:r,isLoading:a}=en(),{mutate:i,isLoading:l}=ej(),{data:c}=(0,et.q)({projectRef:e}),d="custom-domains-form",m=null==c?void 0:c.autoApiService.endpoint,x=(0,S.Xo)(n.KA.UPDATE,"projects",{resource:{project_id:null==t?void 0:t.id}}),g=async t=>{if(!e)return console.error("Project ref is required");r({domain:t.domain},{onSuccess:()=>{i({projectRef:e,customDomain:t.domain})}})};return(0,s.jsx)(u.Z,{id:d,initialValues:{domain:""},validationSchema:eg,onSubmit:g,children:e=>{let{handleReset:t,values:r,initialValues:n}=e,i=JSON.stringify(r)!==JSON.stringify(n);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(j.by,{disabled:!x,footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(j.iN,{form:d,isSubmitting:a||l,submitText:"Add",hasChanges:i,handleReset:t,disabled:!1,helper:x?(0,s.jsx)(p.z,{asChild:!0,type:"default",icon:(0,s.jsx)(ed.Z,{}),children:(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/custom-domains",target:"_blank",rel:"noreferrer",children:"Documentation"})}):"You need additional permissions to update your project's custom domain settings"})}),children:[(0,s.jsx)(j.hj,{header:(0,s.jsx)(j.S0,{children:"Add a custom domain"}),children:(0,s.jsx)(j.B4,{loading:!1,children:(0,s.jsx)(h.Z,{id:"domain",disabled:!x,className:"w-full",type:"text",name:"domain",placeholder:"subdomain.example.com"})})}),(0,s.jsx)(j.hj,{header:(0,s.jsx)(j.S0,{children:"Configure a CNAME record"}),children:(0,s.jsxs)("p",{className:"col-span-12 text-sm lg:col-span-7 leading-6",children:["Set up a CNAME record for"," ",r.domain?(0,s.jsx)("code",{className:"text-xs",children:r.domain}):"your custom domain",", resolving to"," ",m?(0,s.jsx)("code",{className:"text-xs",children:m}):"your project's API URL",", with as low a TTL as possible. If you're using Cloudflare as your DNS provider, disable the proxy option."]})})]})})}})},ey=()=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6 px-8 py-8",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,s.jsx)("div",{className:"h-6 w-1/3 bg-foreground-lighter rounded shimmering-loader"})}),(0,s.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,s.jsx)("div",{className:"h-[38px] w-full bg-foreground-lighter rounded shimmering-loader"})})]});async function eb(e){let{projectRef:t}=e,{data:r,error:s}=await (0,O.v_)("/v1/projects/{ref}/custom-hostname/reverify",{params:{path:{ref:t}}});if(s)throw s;return r}let ew=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>eb(e),{async onSuccess(t,r,n){let{projectRef:a}=r;await s.invalidateQueries(ea.A.list(a)),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to reverify custom domain: ".concat(e.message)):t(e,r,s)},...r})};var eN=r(40855),e_=r(28024),ek=r(57372),eC=e=>{let{type:t,name:r,value:n}=e;return(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("div",{className:"w-[50px]",children:(0,s.jsx)("p",{className:"font-mono text-base",children:t.toUpperCase()})}),(0,s.jsx)(h.Z,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:r,layout:"vertical"}),(0,s.jsx)(h.Z,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:n,layout:"vertical"})]})},eS=e=>{var t,r,n,a,i;let{projectRef:l,customDomain:u,settings:h}=e,[m,x]=(0,Z.useState)(!1),{mutate:f,isLoading:j}=ew({onSuccess:e=>{"2_initiated"===e.status&&x(!0)}}),{mutate:v,isLoading:y}=ec(),b=null===(t=u.ssl.validation_errors)||void 0===t?void 0:t.reduce((e,t)=>e||t.message.includes("caa_error"),!1),w=async()=>{if(!l)return console.error("Project ref is required");v({projectRef:l})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(g.Z.Content,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-foreground mb-2",children:["Configure TXT verification for your custom domain"," ",(0,s.jsx)("code",{className:"text-sm",children:u.hostname})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Set the following TXT record(s) in your DNS provider, then click verify to confirm your control over the domain"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Records which have been successfully verified will be removed from this list below."}),(0,s.jsx)("div",{className:"mt-4 mb-2",children:(0,s.jsxs)(c.bZ,{variant:"default",children:[m?(0,s.jsx)(d.Z,{className:"text-foreground-light",strokeWidth:1.5}):(0,s.jsx)(eN.Z,{className:"text-foreground-light",strokeWidth:1.5}),(0,s.jsx)(c.Cd,{children:m?"Unable to verify records from DNS provider yet.":"Please note that it may take up to 24 hours for the DNS records to propagate."}),(0,s.jsx)(c.X,{children:m?(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{children:"Please check again soon. Note that it may take up to 24 hours for changes in DNS records to propagate."}),(0,s.jsxs)("p",{children:["You may also visit"," ",(0,s.jsx)(o(),{href:"https://whatsmydns.net/#TXT/".concat(u.hostname),className:"text-brand",children:"here"})," ","to check if your DNS has been propagated successfully before clicking verify."]}),(0,s.jsx)("p",{children:"Some registrars will require you to remove the domain name when creating DNS records. As an example, to create a record for `foo.app.example.com`, you would need to create an entry for `foo.app`."})]}):(0,s.jsxs)("p",{children:["You may also visit"," ",(0,s.jsx)(o(),{href:"https://whatsmydns.net/#TXT/".concat(u.hostname),className:"text-brand",children:"here"})," ","to check if your DNS has been propagated successfully before clicking verify."]})})]})})]}),b&&(0,s.jsxs)(c.bZ,{children:[(0,s.jsx)(ek.aN,{}),(0,s.jsx)(c.Cd,{children:"Certificate Authority Authentication (CAA) error"}),(0,s.jsxs)(c.X,{children:['Please add a CAA record allowing "digicert.com" to issue certificates for'," ",(0,s.jsx)("code",{className:"text-xs",children:u.hostname}),". For example:"," ",(0,s.jsx)("code",{className:"text-xs",children:'0 issue "digicert.com"'})]})]}),"validation_timed_out"===u.ssl.status?(0,s.jsxs)(c.bZ,{children:[(0,s.jsx)(ek.aN,{}),(0,s.jsx)(c.Cd,{children:"Validation timed out"}),(0,s.jsx)(c.X,{children:'Please click "Verify" again to retry the validation of the records'})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-[50px]",children:(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"Type"})}),(0,s.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,s.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,s.jsx)("label",{className:"block text-foreground-light text-sm break-all",children:"Name"})})}),(0,s.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,s.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,s.jsx)("label",{className:"block text-foreground-light text-sm break-all",children:"Content"})})})]}),(null===(r=u.verification_errors)||void 0===r?void 0:r.includes("custom hostname does not CNAME to this zone."))&&(0,s.jsx)(eC,{type:"CNAME",name:u.hostname,value:null!==(n=null==h?void 0:h.autoApiService.endpoint)&&void 0!==n?n:"Loading..."}),u.ownership_verification&&(0,s.jsx)(eC,{type:u.ownership_verification.type,name:u.ownership_verification.name,value:u.ownership_verification.value}),"pending_validation"===u.ssl.status&&(0,s.jsx)(eC,{type:"TXT",name:null!==(a=u.ssl.txt_name)&&void 0!==a?a:"Loading...",value:null!==(i=u.ssl.txt_value)&&void 0!==i?i:"Loading..."}),"pending_deployment"===u.ssl.status&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,s.jsx)(d.Z,{size:16,strokeWidth:1.5}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"SSL certificate is being deployed. Please wait a few minutes and try again."})]})]}),(0,s.jsxs)("div",{className:"!mt-4",children:[(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["One of the records requires you to"," ",(0,s.jsx)("span",{className:"text-foreground-light",children:"replace"})," the CNAME record set up in the first step with a TXT record."]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"You'll be able to restore it back to the CNAME after the verification process has been completed."})]})]}),(0,s.jsx)("div",{className:"border-t border-muted"}),(0,s.jsx)(g.Z.Content,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(p.z,{asChild:!0,type:"default",icon:(0,s.jsx)(ed.Z,{}),children:(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/custom-domains",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.z,{type:"default",onClick:w,loading:y,disabled:y||j,className:"self-end",children:"Cancel"}),(0,s.jsx)(p.z,{icon:(0,s.jsx)(e_.Z,{}),onClick:()=>{if(!l)return console.error("Project ref is required");f({projectRef:l})},loading:j,disabled:y||j,className:"self-end",children:"Verify"})]})]})})]})},eP=()=>{var e;let{ref:t}=(0,H.UO)(),r=(0,S.lL)(),n=(0,S.P5)("customDomainsDisabledDueToQuota"),{data:a}=(0,L.G)({orgSlug:null==r?void 0:r.slug}),i=null==a?void 0:null===(e=a.plan)||void 0===e?void 0:e.id,{isLoading:l,data:c}=(0,et.q)({projectRef:t}),{isLoading:u,isError:h,isSuccess:m,data:x}=(0,er.z)({projectRef:t});return(0,s.jsxs)("section",{id:"custom-domains",children:[(0,s.jsx)(j.ph,{title:"Custom Domains",description:"Present a branded experience to your users"}),l||u?(0,s.jsx)(g.Z,{children:(0,s.jsx)(g.Z.Content,{className:"space-y-6",children:(0,s.jsx)(ey,{})})}):h?(0,s.jsx)(g.Z,{children:(0,s.jsx)(g.Z.Content,{className:"space-y-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,s.jsx)(d.Z,{size:16,strokeWidth:1.5}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Failed to retrieve custom domain configuration. Please try again later or"," ",(0,s.jsx)(o(),{href:"/support/new?ref=".concat(t,"&category=sales"),className:"underline",children:"contact support"}),"."]})]})})}):(null==x?void 0:x.status)==="0_no_hostname_configured"?(0,s.jsx)(ev,{}):(null==x?void 0:x.status)==="0_not_allowed"?(0,s.jsx)(ee.Z,{icon:(0,s.jsx)(d.Z,{size:18,strokeWidth:1.5}),primaryText:n?"New custom domains are temporarily disabled":"Custom domains are a Pro plan add-on",projectRef:t,organizationSlug:null==r?void 0:r.slug,secondaryText:n?"We are working with our upstream DNS provider before we are able to sign up new custom domains. Please check back in a few hours.":"free"===i?"To configure a custom domain for your project, please upgrade to the Pro plan with the custom domains add-on selected":"To configure a custom domain for your project, please enable the add-on",addon:"customDomain",disabled:n}):(0,s.jsx)(g.Z,{children:m&&(0,s.jsxs)("div",{className:"flex flex-col",children:[("1_not_started"===x.status||"2_initiated"===x.status||"3_challenge_verified"===x.status)&&(0,s.jsx)(eS,{projectRef:t,customDomain:x.customDomain,settings:c}),"4_origin_setup_completed"===x.status&&(0,s.jsx)(eu,{projectRef:t,customDomain:x.customDomain}),"5_services_reconfigured"===x.status&&(0,s.jsx)(em,{projectRef:t,customDomain:x.customDomain})]})})]})},ez=r(66513),eZ=r(58905),eO=r(47787),eT=r(62870);async function eE(e){let{projectRef:t}=e,r=await (0,w.$v)("".concat(N.T5,"/projects/").concat(t));if(r.error)throw r.error;return r}let eA=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>eE(e),{async onSuccess(t,r,n){await s.invalidateQueries(_.i.list()),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to delete project: ".concat(e.message)):t(e,r,s)},...r})};var eL=e=>{var t,r;let{type:a="danger"}=e,i=(0,z.useRouter)(),{project:o}=(0,f.d2)(),c=(0,S.lL)(),d=null==o?void 0:o.ref,{data:u}=(0,L.G)({orgSlug:null==c?void 0:c.slug}),m="free"===(null!==(r=null==u?void 0:null===(t=u.plan)||void 0===t?void 0:t.id)&&void 0!==r?r:"free"),[x,j]=(0,Z.useState)(!1),[g,v]=(0,Z.useState)(""),[y,b]=(0,Z.useState)([]),{mutateAsync:w,isLoading:N}=eA(),{mutateAsync:_,isLoading:k}=(0,eT.S)(),C=N||k;(0,Z.useEffect)(()=>{x&&(b([]),v(""))},[x]);let O=(0,S.Xo)(n.KA.UPDATE,"projects",{resource:{project_id:null==o?void 0:o.id}}),T=()=>{C||j(!x)},E=e=>{b(void 0===y.find(t=>t===e)?y.concat([e]):y.filter(t=>t!==e))};async function A(){if(void 0!==o){if(!m&&0===y.length)return l.ZP.error("Please select at least one reason for deleting your project");await w({projectRef:o.ref}),m||await _({projectRef:d,message:g,reasons:y.reduce((e,t)=>"".concat(e,"- ").concat(t,"\n"),""),exitAction:"delete"}),l.ZP.success("Successfully deleted ".concat(o.name)),i.push("/projects")}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.fC,{delayDuration:0,children:[(0,s.jsx)(P.xz,{asChild:!0,children:(0,s.jsx)(p.z,{onClick:T,type:a,disabled:!O,children:"Delete project"})}),!O&&(0,s.jsx)(P.h_,{children:(0,s.jsxs)(P.VY,{side:"bottom",children:[(0,s.jsx)(P.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete this project"})})]})})]}),(0,s.jsx)(eZ.Z,{visible:x,loading:C,size:m?"small":"medium",title:"Confirm deletion of ".concat(null==o?void 0:o.name),variant:"destructive",alert:{title:m?"This action cannot be undone.":"This will permanently delete the ".concat(null==o?void 0:o.name),description:m?"":"All project data will be lost, and cannot be undone"},text:m?"This will permanently delete the ".concat(null==o?void 0:o.name," project and all of its data."):void 0,confirmPlaceholder:"Type the project name in here",confirmString:(null==o?void 0:o.name)||"",confirmLabel:"I understand, delete this project",onConfirm:A,onCancel:T,children:!m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h4",{className:"text-base",children:"We're sad that you're leaving."}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"We always strive to improve Supabase as much as we can. Please let us know the reasons you are deleting your project so that we can improve in the future."})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:eO.Y.map(e=>{let t=y.find(t=>t===e);return(0,s.jsxs)("label",{className:["flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm shadow-sm transition-all duration-100","".concat(t?" bg-foreground text-background opacity-100 hover:bg-opacity-75":" bg-border-strong text-foreground opacity-25 hover:opacity-50")].join(" "),children:[(0,s.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:e=>E(e.target.value)}),(0,s.jsx)("div",{children:e})]},e)})}),(0,s.jsx)("div",{className:"text-area-text-sm",children:(0,s.jsx)(h.Z.TextArea,{name:"message",label:"Anything else that we can improve on?",rows:3,value:g,onChange:e=>v(e.target.value)})})]})]})})]})},eD=()=>{let{project:e}=(0,f.d2)();return void 0===e?null:(0,s.jsxs)("section",{id:"delete-project",children:[(0,s.jsx)(j.ph,{title:"Delete Project",description:""}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(g.Z.Content,{children:(0,s.jsx)(ez.b,{variant:"danger",withIcon:!0,title:"Deleting this project will also remove your database.",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-4 block",children:"Make sure you have made a backup if you want to keep your data."}),(0,s.jsx)(eL,{})]})})})})]})},eF=r(89796),eR=r(79378),eY=r(86020),eq=r(91092),eI=r(55380),eW=r(20867),eU=r(66953),eX=r(5761);async function eM(e){let{projectRef:t,targetOrganizationSlug:r}=e;if(!t)throw Error("projectRef is required");if(!r)throw Error("targetOrganizationSlug is required");let s=await (0,w.v_)("".concat(N.T5,"/projects/").concat(t,"/transfer"),{target_organization_slug:r});if(s.error)throw s.error;return s}let eV=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,y.NL)();return(0,b.D)(e=>eM(e),{async onSuccess(t,r,n){let{projectRef:a,targetOrganizationSlug:i}=r;await Promise.all([s.invalidateQueries(_.i.projectTransferPreview(a,i)),s.invalidateQueries(_.i.detail(a)),s.invalidateQueries(_.i.list())]),await (null==e?void 0:e(t,r,n))},async onError(e,r,s){void 0===t?l.Am.error("Failed to transfer project: ".concat(e.message)):t(e,r,s)},...r})};var eQ=r(36492);async function eB(e,t){let{projectRef:r,targetOrganizationSlug:s}=e;if(!r)throw Error("projectRef is required");if(!s)throw Error("targetOrganizationSlug is required");let n=await (0,w.v_)("".concat(N.T5,"/projects/").concat(r,"/transfer/preview"),{target_organization_slug:s},{signal:t});if(n.error)throw n.error;return n}let eG=function(e){let{projectRef:t,targetOrganizationSlug:r}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,eQ.a)(_.i.projectTransferPreview(t,r),e=>{let{signal:s}=e;return eB({projectRef:t,targetOrganizationSlug:r},s)},{enabled:s&&void 0!==t&&void 0!==r,...n,retry:(e,t)=>("object"!=typeof t||null===t||!("code"in t)||400!==t.code)&&e<3})};var eK=r(5388),e$=()=>{let e=(0,S.Vm)(),t=null==e?void 0:e.ref,r=null==e?void 0:e.organization_id,{data:a}=(0,eX.tl)(),i=(0,S.P5)("disableProjectTransfer"),c=(a||[]).filter(e=>e.id!==r),[u,h]=(0,Z.useState)(!1),[m,x]=(0,Z.useState)(),{mutate:f,error:j,isLoading:g}=eV({onSuccess:()=>{l.ZP.success("Successfully transferred project ".concat(null==e?void 0:e.name,".")),h(!1)}}),{data:v,error:y,isLoading:b,remove:w}=eG({projectRef:t,targetOrganizationSlug:m},{enabled:!g&&u});(0,Z.useEffect)(()=>{u?x(void 0):w()},[u]);let N=(0,S.Xo)(n.KA.UPDATE,"organizations"),_=()=>{h(!u)};async function k(){void 0!==e&&void 0!==m&&f({projectRef:t,targetOrganizationSlug:m})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.fC,{delayDuration:0,children:[(0,s.jsx)(P.xz,{asChild:!0,children:(0,s.jsx)(p.z,{onClick:_,type:"default",disabled:!N||i,children:"Transfer project"})}),(!N||i)&&(0,s.jsx)(P.h_,{children:(0,s.jsxs)(P.VY,{side:"bottom",children:[(0,s.jsx)(P.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:N?"Project transfers are temporarily disabled, please try again later.":"You need additional permissions to transfer this project"})})]})})]}),(0,s.jsx)(eF.C,{closable:!0,onCancel:()=>_(),visible:u,loading:g,size:"xlarge",header:"Transfer project ".concat(null==e?void 0:e.name),customFooter:(0,s.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,s.jsx)(p.z,{type:"default",onClick:()=>h(!1),children:"Cancel"}),(0,s.jsx)(p.z,{onClick:()=>k(),disabled:!v||!v.valid||g||!m,children:"Transfer Project"})]}),children:(0,s.jsxs)("div",{className:"space-y-4 py-4 text-foreground-light",children:[(0,s.jsxs)(eF.C.Content,{children:[(0,s.jsxs)("p",{className:"text-sm",children:["To transfer projects, the owner must be a member of both the source and target organizations. For further information see our"," ",(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/project-transfer",className:"text-brand hover:underline",target:"_blank",rel:"noreferrer",children:"Documentation"}),"."]}),(0,s.jsx)("p",{className:"font-bold mt-6 text-sm",children:"Transferring considerations:"}),(0,s.jsxs)("ul",{className:"mt-4 space-y-5 text-sm px-4",children:[(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eR.Z,{})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"No downtime"}),(0,s.jsx)("p",{children:"There is no downtime or restrictions involved when transferring a project."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eY.Z,{})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Permissions"}),(0,s.jsx)("p",{children:"Depending on your role in the target organization, your level of permissions may change after transfer."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eq.Z,{w:14,className:"flex-shrink-0"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Features"}),(0,s.jsx)("p",{children:"Moving your project to an organization with a smaller subscription plan may result in the loss of certain features (i.e. image transformations)."})]})]})]})]}),(0,s.jsx)(eF.C.Content,{children:c&&(0,s.jsxs)("div",{className:"mt-8 mx-4 border-t pt-4 space-y-2",children:[0===c.length?(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-surface-200 p-3 text-sm",children:[(0,s.jsx)(d.Z,{})," You do not have any organizations with an organization-based subscription."]}):(0,s.jsxs)(eI.Z,{label:"Select Target Organization",layout:"vertical",value:m,onChange:e=>x(e),placeholder:"Select Organization",children:[(0,s.jsx)(eI.Z.Option,{disabled:!0,label:"Select Organization",value:"",children:"Select Organization"},"no-results"),c.map(e=>(0,s.jsx)(eI.Z.Option,{label:e.name,value:e.slug,addOnBefore:()=>(0,s.jsx)(eW.Z,{}),children:e.name},e.id))]}),(0,s.jsxs)("p",{className:"text-foreground-light text-sm",children:["The target organization needs to use"," ",(0,s.jsx)(o(),{href:"https://supabase.com/docs/guides/platform/org-based-billing",target:"_blank",rel:"noreferrer",className:"underline",children:"organization-based billing"}),". To migrate an organization to the new billing, head to your"," ",(0,s.jsx)(o(),{href:"/org/_/billing",target:"_blank",rel:"noreferrer",className:"underline",children:"organizations billing settings"}),"."]})]})}),(0,s.jsx)(eU.Z,{active:void 0!==m&&b,children:(0,s.jsx)(eF.C.Content,{children:(0,s.jsxs)("div",{className:"px-4",children:[v&&v.valid&&(0,s.jsxs)("div",{className:"text-sm text-foreground-light p-4 bg-surface-200",children:[v.source_subscription_plan!==v.target_subscription_plan?(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["Your project is currently on the"," ",v.source_subscription_plan," plan, whereas the target organization uses the ",v.target_subscription_plan," plan."]})}):(0,s.jsxs)("div",{children:["Your project and the target organization are both on the"," ",v.source_subscription_plan," subscription plan."]}),(0,s.jsxs)("div",{className:"my-4",children:[0===v.credits_on_source_organization?(0,s.jsxs)("span",{children:[" ","Your current organization won't be granted any prorated credits."]}):(0,s.jsxs)("span",{children:[" ","Your current organization will be granted"," ",(0,s.jsxs)("span",{className:"text-brand",children:["$",v.credits_on_source_organization]})," ","in credits as proration."]}),0===v.costs_on_target_organization?(0,s.jsxs)("span",{children:[" ","The target organization won't be charged any immediate upfront payment."]}):(0,s.jsxs)("span",{children:[" ","The target organization will be billed"," ",(0,s.jsx)("span",{className:"text-brand",children:(0,eK.xG)(v.costs_on_target_organization)})," ","immediately to prorate for the remainder of the billing period."]})]})]}),v&&v.warnings.length>0&&(0,s.jsx)(ez.b,{withIcon:!0,variant:"warning",title:"Warnings for project transfer",className:"mt-3",children:(0,s.jsx)("div",{className:"space-y-1",children:v.warnings.map(e=>(0,s.jsx)("p",{children:e.message},e.key))})}),v&&v.errors.length>0&&(0,s.jsxs)(ez.b,{withIcon:!0,variant:"danger",title:"Project cannot be transferred",children:[(0,s.jsx)("div",{className:"space-y-1",children:v.errors.map(e=>(0,s.jsx)("p",{children:e.message},e.key))}),v.members_exceeding_free_project_limit.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"These members have reached their maximum limits for the number of active Free plan projects within organizations where they are an administrator or owner:"}),(0,s.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(v.members_exceeding_free_project_limit||[]).map((e,t)=>(0,s.jsxs)("li",{children:[e.name," (Limit: ",e.limit," free projects)"]},"member-".concat(t)))}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of their projects before you can downgrade this project."})]})]}),y&&!j&&(0,s.jsx)(ez.b,{withIcon:!0,variant:"danger",title:"Project cannot be transferred",children:(0,s.jsx)("p",{children:y.message})}),j&&(0,s.jsx)(ez.b,{withIcon:!0,variant:"danger",title:"Project cannot be transferred",children:(0,s.jsx)("p",{children:j.message})})]})})})]})})]})};function eJ(){return(eJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var eH=(0,Z.forwardRef)(function(e,t){var r=e.color,s=e.size,n=void 0===s?24:s,a=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["color","size"]);return Z.createElement("svg",eJ({ref:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),Z.createElement("rect",{x:"1",y:"3",width:"15",height:"13"}),Z.createElement("polygon",{points:"16 8 20 8 23 11 23 16 16 16 16 8"}),Z.createElement("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),Z.createElement("circle",{cx:"18.5",cy:"18.5",r:"2.5"}))});eH.propTypes={color:F().string,size:F().oneOfType([F().string,F().number])},eH.displayName="Truck";var e0=function(e){return(0,s.jsx)(q.Z,{icon:eH,...e})},e2=()=>void 0===(0,S.Vm)()?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("section",{id:"transfer-project",children:[(0,s.jsx)(j.ph,{title:"Transfer Project",description:"Transfer your project to a different organization with no downtime."}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(g.Z.Content,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(e0,{className:"mt-1"}),(0,s.jsxs)("div",{className:"space-y-1 xl:max-w-lg",children:[(0,s.jsx)("p",{className:"text-sm",children:"Transfer project to another organization"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"To transfer projects, the owner must be a member of both the source and target organizations."})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(e$,{})})]})})})]}),e1=r(3593);let e4=()=>{let{project:e}=(0,f.d2)(),t=!!(null==e?void 0:e.parent_project_ref),{projectsTransfer:r}=(0,S.N3)(["projects:transfer"]);return(0,s.jsxs)("div",{className:"1xl:px-28 mx-auto flex flex-col gap-10 px-5 py-6 lg:px-16 xl:px-24 2xl:px-32",children:[(0,s.jsx)(J,{}),t?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP,{}),r&&(0,s.jsx)(e2,{}),(0,s.jsx)(eD,{})]})]})};e4.getLayout=e=>(0,s.jsx)(e1.dU,{title:"General",children:e});var e5=e4},81476:function(e,t,r){"use strict";var s=r(52322);r(2784);var n=r(7342),a=r(83036);t.Z=function(e){return(0,s.jsx)(a.Z,{icon:n.Z,...e})}},86020:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(52322),n=r(2784),a=r(13980),i=r.n(a);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,t){var r=e.color,s=e.size,a=void 0===s?24:s,i=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["color","size"]);return n.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),n.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}))});l.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},l.displayName="Shield";var c=r(83036),d=function(e){return(0,s.jsx)(c.Z,{icon:l,...e})}},20867:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(52322),n=r(2784),a=r(13980),i=r.n(a);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,t){var r=e.color,s=e.size,a=void 0===s?24:s,i=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["color","size"]);return n.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),n.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),n.createElement("circle",{cx:"9",cy:"7",r:"4"}),n.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),n.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}))});l.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},l.displayName="Users";var c=r(83036),d=function(e){return(0,s.jsx)(c.Z,{icon:l,...e})}},7342:function(e,t,r){"use strict";var s=r(2784),n=r(13980),a=r.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var o=(0,s.forwardRef)(function(e,t){var r=e.color,n=e.size,a=void 0===n?24:n,o=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["color","size"]);return s.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),s.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),s.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))});o.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},o.displayName="BarChart2",t.Z=o}},function(e){e.O(0,[667,9678,8183,8421,3844,3145,8286,3517,5022,6751,1421,5573,1761,5232,2550,8601,4056,3501,7689,6647,6909,5952,1685,9298,9774,2888,179],function(){return e(e.s=31458)}),_N_E=e.O()}]);