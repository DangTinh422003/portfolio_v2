(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7893],{85701:function(e,s,t){var l=t(39872),r=t(38101);e.exports=function(e,s,t){return e&&e.length?l(e,0,(s=t||void 0===s?1:r(s))<0?0:s):[]}},34457:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(56626).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},86350:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/realtime/inspector",function(){return t(69281)}])},43801:function(e,s,t){"use strict";function l(e){var s;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",{displayName:l,display_name:r,fullName:a,full_name:n,familyName:i,family_name:o,givenName:c,given_name:d,surname:x,lastName:h,last_name:u,firstName:m,first_name:p}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{},g=i||o||x||h||u,f=c||d||m||p;return l||r||a||n||f&&g&&"".concat(f," ").concat(g)||t}function r(e){var s;let{avatarUrl:t,avatarURL:l,avatar_url:r,profileUrl:a,profileURL:n,profile_url:i,profileImage:o,profile_image:c,profileImageUrl:d,profileImageURL:x,profile_image_url:h}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{};return t||l||r||o||c||a||n||i||d||x||h}t.d(s,{E:function(){return r},G:function(){return l}})},23906:function(e,s,t){"use strict";t.d(s,{Q:function(){return L},G:function(){return D}});var l=t(52322),r=t(2784),a=t(26120),n=t(27792),i=t(12467),o=t(81395),c=t(30474),d=t(50412),x=t(43801),h=t(40386),u=t(6659);let m=e=>{let{isSelected:s=!1}=e,{resolvedTheme:t}=(0,u.F)();return(0,l.jsx)("svg",{width:"53",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{opacity:s?"1":".5",children:[(0,l.jsx)("rect",{x:"37.161",y:".53",width:"15",height:"15",rx:"5.5",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("path",{d:"M1 10.53h32.214",stroke:"#33A7E9",strokeLinecap:"round",strokeDasharray:"2 2"}),(0,l.jsx)("rect",{x:"15.964",y:".53",width:"9",height:"15",rx:"4.5",stroke:"light"===t?"#7E868C":"#7E7E7E"}),(0,l.jsx)("path",{d:"M1 5.53h32.214",stroke:"#33A7E9",strokeLinecap:"round",strokeDasharray:"2 2"})]})})},p=e=>{let{isSelected:s=!1}=e,{resolvedTheme:t}=(0,u.F)();return(0,l.jsx)("svg",{width:"53",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{opacity:s?"1":".5",children:[(0,l.jsx)("path",{d:"M1 4.994a.5.5 0 0 0 0 1v-1Zm16.218 1h.5v-1h-.5v1ZM1 5.994h1.014v-1H1v1Zm3.04 0h2.028v-1H4.041v1Zm4.056 0h2.027v-1H8.096v1Zm4.054 0h2.027v-1H12.15v1Zm4.055 0h1.013v-1h-1.013v1Z",fill:"light"===t?"#7E868C":"#7E7E7E"}),(0,l.jsx)("path",{d:"m15.92 12.56 9.04-9.04",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("rect",{x:"15.964",y:".494",width:"9",height:"15",rx:"4.5",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("rect",{x:"37.161",y:".744",width:"15",height:"15",rx:"5.5",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("path",{d:"M1 10.494h32.214",stroke:"#33A7E9",strokeLinecap:"round",strokeDasharray:"2 2"}),(0,l.jsx)("path",{d:"M15.96 7.562 22.568.956M19.049 14.885l5.957-5.958",stroke:"light"===t?"#11181C":"#EDEDED"})]})})},g=e=>{let{isSelected:s=!1}=e,{resolvedTheme:t}=(0,u.F)();return(0,l.jsx)("svg",{width:"68",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{opacity:s?"1":".5",children:[(0,l.jsx)("path",{d:"M15.63 5.156a.5.5 0 1 0 0 1v-1Zm16.218 1h.5v-1h-.5v1Zm-16.218 0h1.013v-1H15.63v1Zm3.04 0h2.028v-1h-2.027v1Zm4.055 0h2.028v-1h-2.028v1Zm4.055 0h2.027v-1H26.78v1Zm4.055 0h1.013v-1h-1.013v1Z",fill:"light"===t?"#7E868C":"#7E7E7E"}),(0,l.jsx)("path",{d:"m30.55 12.722 9.04-9.04",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("rect",{x:"30.594",y:".656",width:"9",height:"15",rx:"4.5",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("rect",{x:"51.791",y:".906",width:"15",height:"15",rx:"5.5",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("path",{d:"M15.63 10.656h32.214",stroke:"#33A7E9",strokeLinecap:"round",strokeDasharray:"2 2"}),(0,l.jsx)("path",{d:"m30.59 7.724 6.607-6.606M33.679 15.047l5.957-5.958",stroke:"light"===t?"#11181C":"#EDEDED"}),(0,l.jsx)("path",{d:"M12.666 14.281v-1.333A2.667 2.667 0 0 0 10 10.28H6a2.667 2.667 0 0 0-2.667 2.667v1.333M8 7.615A2.667 2.667 0 1 0 8 2.28a2.667 2.667 0 0 0 0 5.334Z",stroke:"light"===t?"#11181C":"#EDEDED",strokeLinecap:"round",strokeLinejoin:"round"})]})})};var f=t(16166),j=t(60537),v=t(83036),b=function(e){return(0,l.jsx)(v.Z,{icon:j.Z,...e})},y=function(e){let{label:s,value:t,isSelected:r,onSelectedChange:a,icon:n}=e;return(0,l.jsxs)("label",{className:(0,i.cn)("border border-default rounded-md bg-surface-200 hover:bg-overlay-hover hover:border-control px-4 py-3 w-44 cursor-pointer transition-colors",r&&"border-stronger bg-surface-300"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&a(t)},htmlFor:"role-".concat(t),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[n&&(0,l.jsx)("div",{children:n}),r&&(0,l.jsxs)("div",{className:"flex items-center justify-center p-0.5 bg-foreground text-background rounded-full",children:["boolean"==typeof r&&(0,l.jsx)(f.Z,{size:12,strokeWidth:"4",className:"text-background"}),"partially"===r&&(0,l.jsx)(b,{size:12,strokeWidth:"4",className:"text-background"})]})]}),(0,l.jsx)("input",{id:"role-".concat(t),type:"radio",name:"role",value:t,checked:!!r,onChange:e=>{a(e.target.value)},className:"invisible h-0 w-0 border-0"}),(0,l.jsxs)("span",{className:(0,i.cn)("text-sm text-foreground-light whitespace-nowrap select-none transition-colors",r&&"text-foreground"),children:[null!=s?s:t," role"]})]})},N=t(53111),w=t(83314),k=t(33105),C=t(81650),S=t(47716),E=t(38880),_=t(88724),Z=t(31840),z=()=>{var e,s,t,a;let[i,o]=(0,r.useState)(""),c=(0,N.Nr)(i,300),{project:h}=(0,w.d2)(),{data:u,isSuccess:m,isLoading:p,isError:g,error:f,isFetching:j,isPreviousData:v}=(0,C.xY)({projectRef:null==h?void 0:h.ref,keywords:c||void 0},{keepPreviousData:!0}),b=(0,d.fN)(),y=(null===(e=b.role)||void 0===e?void 0:e.type)==="postgrest"&&"authenticated"===b.role.role&&b.role.user;function z(e){b.setRole({type:"postgrest",role:"authenticated",user:e})}return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("h2",{className:"text-foreground text-base",children:y?"Impersonating ".concat((0,x.G)(y,null!==(a=null!==(t=null!==(s=y.email)&&void 0!==s?s:y.phone)&&void 0!==t?t:y.id)&&void 0!==a?a:"Unknown")):"Impersonate a User"}),(0,l.jsx)("p",{className:"text-sm text-foreground-light max-w-md",children:y?"Results will respect your database's Row-Level Security policies for this user.":"Select a user to respect your database's Row-Level Security policies for that particular user."}),y?(0,l.jsx)(R,{user:y,onClick:function(){b.setRole(void 0)},isImpersonating:!0}):(0,l.jsxs)("div",{className:"flex flex-col gap-2 mt-4",children:[(0,l.jsx)(Z.Z,{className:"table-editor-search border-none",icon:v&&j?(0,l.jsx)(S.Z,{className:"animate-spin text-foreground-lighter",size:16,strokeWidth:1.5}):(0,l.jsx)(E.Z,{className:"text-foreground-lighter",size:16,strokeWidth:1.5}),placeholder:"Search for a user..",onChange:e=>o(e.target.value.trim()),value:i,size:"small",actions:i&&(0,l.jsx)(n.z,{size:"tiny",type:"text",className:"px-1",onClick:()=>o(""),children:(0,l.jsx)(_.Z,{size:12,strokeWidth:2})})}),p&&(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center h-24",children:[(0,l.jsx)(S.Z,{className:"animate-spin",size:24}),(0,l.jsx)("span",{children:"Loading users..."})]}),g&&(0,l.jsx)(k.Z,{error:f,subject:"Failed to retrieve users"}),m&&(u.users.length>0?(0,l.jsx)("ul",{className:"divide-y max-h-[192px] overflow-y-scroll",role:"list",children:u.users.map(e=>(0,l.jsx)("li",{role:"listitem",children:(0,l.jsx)(M,{user:e,onClick:z})},e.id))}):(0,l.jsx)("div",{className:"flex flex-col gap-2 items-center justify-center h-24",children:(0,l.jsx)("p",{className:"text-foreground-light text-xs",role:"status",children:"No users found"})}))]})]})};let R=e=>{var s,t,r;let{user:a,onClick:i,isImpersonating:o=!1}=e,d=(0,x.E)(a),h=(0,x.G)(a,null!==(r=null!==(t=null!==(s=a.email)&&void 0!==s?s:a.phone)&&void 0!==t?t:a.id)&&void 0!==r?r:"Unknown")+(a.is_anonymous?" (anonymous)":"");return(0,l.jsxs)("div",{className:"flex items-center gap-3 py-2 text-foreground",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 bg-surface-200 pr-5 pl-0.5 py-0.5 border rounded-full max-w-l",children:[d?(0,l.jsx)("img",{className:"rounded-full w-5 h-5",src:d,alt:h}):(0,l.jsx)("div",{className:"rounded-full w-[21px] h-[21px] bg-surface-300 border border-strong flex items-center justify-center",children:(0,l.jsx)(c.Z,{size:12,strokeWidth:2})}),(0,l.jsx)("span",{className:"text-sm truncate",children:h})]}),(0,l.jsx)(n.z,{type:"secondary",onClick:()=>{i(a)},children:o?"Stop Impersonating":"Impersonate"})]})},M=e=>{var s,t,r;let{user:a,onClick:i,isImpersonating:o=!1}=e,d=(0,x.E)(a),h=(0,x.G)(a,null!==(r=null!==(t=null!==(s=a.email)&&void 0!==s?s:a.phone)&&void 0!==t?t:a.id)&&void 0!==r?r:"Unknown")+(a.is_anonymous?" (anonymous)":"");return(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 text-foreground",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[d?(0,l.jsx)("img",{className:"rounded-full w-5 h-5",src:d,alt:h}):(0,l.jsx)("div",{className:"rounded-full w-[21px] h-[21px] bg-surface-300 border text-muted flex items-center justify-center text-background",children:(0,l.jsx)(c.Z,{size:12,strokeWidth:2})}),(0,l.jsx)("span",{className:"text-sm",children:h})]}),(0,l.jsx)(n.z,{type:"secondary",onClick:()=>{i(a)},children:o?"Stop Impersonating":"Impersonate"})]})};var D=e=>{var s;let{serviceRoleLabel:t,padded:a=!0}=e,n=(0,d.fN)(),[o,c]=(0,r.useState)(()=>{var e;return(null===(e=n.role)||void 0===e?void 0:e.type)==="postgrest"&&("anon"===n.role.role||"authenticated"===n.role.role)?n.role.role:"service_role"}),x=!!("authenticated"===o&&(null===(s=n.role)||void 0===s?void 0:s.type)==="postgrest"&&"authenticated"===n.role.role&&n.role.user);function u(e){"service_role"===e&&n.setRole(void 0),"anon"===e&&n.setRole({type:"postgrest",role:e}),c(e)}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-3",a?"p-5":"pb-5"),children:[(0,l.jsx)("h2",{className:"text-foreground text-base",children:"Database role settings"}),(0,l.jsx)("form",{onSubmit:e=>{e.preventDefault()},children:(0,l.jsxs)("fieldset",{className:"flex gap-3",children:[(0,l.jsx)(y,{value:"service_role",isSelected:"service_role"===o,onSelectedChange:u,label:t,icon:(0,l.jsx)(m,{isSelected:"service_role"===o})}),(0,l.jsx)(y,{value:"anon",isSelected:"anon"===o,onSelectedChange:u,icon:(0,l.jsx)(p,{isSelected:"anon"===o})}),(0,l.jsx)(y,{value:"authenticated",isSelected:"authenticated"===o&&(x||"partially"),onSelectedChange:u,icon:(0,l.jsx)(g,{isSelected:"authenticated"===o})})]})}),"service_role"===o&&(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:["The default Postgres/superuser role. This has admin privileges.",(0,l.jsx)("br",{}),"It will bypass Row Level Security (RLS) policies."]}),"anon"===o&&(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:['For "anonymous access". This is the role which the API (PostgREST) will use when a user',(0,l.jsx)("br",{}),"is not logged in. It will respect Row Level Security (RLS) policies."]}),"authenticated"===o&&(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:['For "authenticated access". This is the role which the API (PostgREST) will use when',(0,l.jsx)("br",{})," a user is logged in. It will respect Row Level Security (RLS) policies."]})]}),"authenticated"===o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.VD,{}),(0,l.jsx)("div",{className:(0,i.cn)("py-5",a&&"px-5"),children:(0,l.jsx)(z,{})})]})]})},L=e=>{var s,t,c,x;let{serviceRoleLabel:h,variant:u="regular",align:m="end"}=e,p=(0,d.fN)(),[g,f]=(0,r.useState)(!1),j=null!==(x=null!==(c=null===(s=p.role)||void 0===s?void 0:s.role)&&void 0!==c?c:h)&&void 0!==x?x:"service role";return(0,l.jsxs)(a.J2,{open:g,onOpenChange:f,modal:!1,children:[(0,l.jsx)(a.xo,{asChild:!0,children:(0,l.jsx)(n.z,{size:"tiny",type:"default",className:(0,i.cn)("h-[26px] pr-3 gap-0","connected-on-right"===u&&"rounded-r-none border-r-0","connected-on-left"===u&&"rounded-l-none border-l-0","connected-on-both"===u&&"rounded-none border-x-0"),children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"text-foreground-muted",children:"role"}),(0,l.jsx)("span",{children:j}),(null===(t=p.role)||void 0===t?void 0:t.type)==="postgrest"&&"authenticated"===p.role.role&&(0,l.jsx)(F,{user:p.role.user}),(0,l.jsx)(o.Z,{className:"text-muted",strokeWidth:1,size:12})]})})}),(0,l.jsx)(a.yk,{className:"p-0 w-full overflow-hidden bg-overlay",side:"bottom",align:m,children:(0,l.jsx)(D,{serviceRoleLabel:h})})]})};let F=e=>{var s,t,r;let{user:a}=e,n=(0,x.E)(a),i=(0,x.G)(a,null!==(r=null!==(t=null!==(s=a.email)&&void 0!==s?s:a.phone)&&void 0!==t?t:a.id)&&void 0!==r?r:"Unknown");return(0,l.jsxs)("div",{className:"flex gap-1 items-center pl-0.5 pr-1.5 h-[21px] bg-surface-200 rounded-full overflow-hidden",children:[n?(0,l.jsx)("img",{className:"rounded-full w-[18px] h-[18px]",src:n,alt:i}):(0,l.jsx)("div",{className:"rounded-full w-[18px] h-[18px] bg-surface-100 border flex items-center justify-center text-light",children:(0,l.jsx)(c.Z,{size:12,strokeWidth:2})}),(0,l.jsx)("span",{className:"truncate max-w-[84px]",children:i})]})}},81650:function(e,s,t){"use strict";t.d(s,{RT:function(){return n},xY:function(){return o}});var l=t(36492),r=t(49422),a=t(79916);let n=10;async function i(e,s){let{projectRef:t,page:l=1,keywords:a="",verified:i}=e;if(!t)throw Error("Project ref is required");let o={limit:n.toString(),offset:((l-1)*10).toString(),keywords:a};i&&(o.verified=i);let{data:c,error:d}=await (0,r.U2)("/platform/auth/{ref}/users",{params:{path:{ref:t},query:o},signal:s});if(d)throw(0,r.S3)(d);return c}let o=function(e){let{projectRef:s,page:t,keywords:r,verified:n}=e,{enabled:o=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.a)(a.o.users(s,{page:t,keywords:r,verified:n}),e=>{let{signal:l}=e;return i({projectRef:s,page:t,keywords:r,verified:n},l)},{enabled:o&&void 0!==s,...c})}},11255:function(e,s,t){"use strict";t.d(s,{s:function(){return o}});var l=t(36492),r=t(71436),a=t(76626),n=t(71824);async function i(e,s){let{projectRef:t}=e;if(!t)throw Error("projectRef is required");let l=await (0,r.U2)("".concat(a.T5,"/projects/").concat(t,"/config/postgrest"),{signal:s});if(l.error)throw l.error;return l}let o=function(e){let{projectRef:s}=e,{enabled:t=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.a)(n.U.postgrest(s),e=>{let{signal:t}=e;return i({projectRef:s},t)},{enabled:t&&void 0!==s,...r})}},69281:function(e,s,t){"use strict";t.r(s),t.d(s,{InspectorPage:function(){return e0},default:function(){return e1}});var l=t(52322),r=t(59491),a=t(24459),n=t(5632),i=t(2784),o=t(5590),c=t(24990),d=t(56626);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,d.Z)("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]),h=(0,d.Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var u=t(27792),m=t(88883),p=t(39097),g=t.n(p),f=t(63955),j=t(26120),v=t(56599),b=t(56860),y=t(97351),N=t(30195);let w=e=>{let{config:s,onChangeConfig:t}=e,[r,c]=(0,i.useState)(!1),d=(0,a.Mk)(),x=(0,n.useRouter)(),h=N.Ry({channel:N.Z_()}),p=(0,f.cI)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,m.F)(h),defaultValues:{channel:""}}),w=()=>{c(!1),o.Z.sendEvent({category:"realtime_inspector",action:"started_listening_to_channel_in_input_channel_popover",label:"realtime_inspector_config"},d,x),t({...s,channelName:p.getValues("channel"),enabled:!0})};return(0,l.jsxs)(j.J2,{open:r,onOpenChange:e=>{!0===e&&p.setValue("channel",s.channelName),c(e)},children:[(0,l.jsx)(j.xo,{asChild:!0,children:(0,l.jsx)(u.z,{className:"rounded-r-none",type:"default",size:"tiny",iconRight:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)("p",{className:"max-w-[120px] truncate",title:s.channelName.length>0?s.channelName:"",children:s.channelName.length>0?"Channel: ".concat(s.channelName):"Join a channel"})})}),(0,l.jsx)(j.yk,{className:"p-0 w-[320px]",align:"start",children:(0,l.jsx)("div",{className:"p-4 flex flex-col text-sm",children:0===s.channelName.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.l0,{...p,children:(0,l.jsx)("form",{id:"realtime-channel",onSubmit:p.handleSubmit(()=>w()),children:(0,l.jsx)(b.Wi,{name:"channel",control:p.control,render:e=>{let{field:s}=e;return(0,l.jsxs)(b.xJ,{children:[(0,l.jsx)("label",{className:"text-foreground text-xs mb-2",children:"Name of channel"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(b.NI,{children:(0,l.jsx)(y.I,{...s,autoComplete:"off",className:"rounded-r-none text-xs px-2.5 py-1 h-auto",placeholder:"Enter a channel name"})}),(0,l.jsx)(u.z,{type:"primary",className:"rounded-l-none",disabled:0===p.getValues().channel.length,onClick:()=>w(),children:"Listen to channel"})]})]})}})})}),(0,l.jsxs)("p",{className:"text-xs text-foreground-lighter mt-2",children:["The channel you initialize with the Supabase Realtime client. Learn more in"," ",(0,l.jsx)(g(),{href:"https://supabase.com/docs/guides/realtime/concepts#channels",target:"_blank",rel:"noreferrer",className:"underline hover:text-foreground transition",children:"our docs"})]})]}):(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)("p",{className:"text-foreground text-xs",children:"Currently joined channel:"}),(0,l.jsx)("p",{className:"text-xs border border-scale-600  py-0.5 px-1 rounded-md bg-surface-200",children:s.channelName})]}),(0,l.jsx)("p",{className:"text-xs text-foreground-lighter mt-2",children:"If you leave this channel, all of the messages populated on this page will disappear"}),(0,l.jsx)(u.z,{type:"default",onClick:()=>t({...s,channelName:"",enabled:!1}),children:"Leave channel"})]})})})]})};var k=t(34457),C=t(12467),S=t(81733),E=t(83036);let _=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:10,d:"m23.149 23.499 3.424 7.83a.5.5 0 0 0 .942-.074l.74-2.868a.5.5 0 0 1 .364-.36l3.039-.756a.5.5 0 0 0 .08-.943l-7.93-3.487a.5.5 0 0 0-.66.658Z"}),(0,l.jsx)("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:10,d:"M24.544 32.746h-5.623a3 3 0 0 1-3-3V18.5a3 3 0 0 1 3-3h11.247a3 3 0 0 1 3 3v5.623",opacity:.45})]});var Z=function(e){return(0,l.jsx)(E.Z,{src:(0,l.jsx)(_,{}),viewBox:"12.5 12 24 24",...e})},z=t(76419);let R=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{id:"Ellipse 146",d:"M17.3154 6.70312C18.6968 8.06227 19.5532 9.95249 19.5532 12.0426C19.5532 14.1326 18.6968 16.0229 17.3154 17.382M6.79102 6.70312C5.40966 8.06227 4.55322 9.95249 4.55322 12.0426C4.55322 14.1326 5.40966 16.0229 6.79102 17.382",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel",opacity:.45}),(0,l.jsx)("ellipse",{id:"Ellipse 144",cx:"12.0532",cy:"12.0428",rx:"3.00928",ry:"3.00666",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel"}),(0,l.jsx)("path",{id:"Vector 96",d:"M12.0747 15.0488L12.0747 23.9996",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel"})]});var M=function(e){return(0,l.jsx)(E.Z,{src:(0,l.jsx)(R,{}),viewBox:"0 0 24 24",...e})};let D=()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",children:[(0,l.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel",strokeMiterlimit:10,d:"M20.307 12a7.807 7.807 0 0 1-7.807 7.808M4.693 12A7.807 7.807 0 0 1 12.5 4.193",opacity:.45}),(0,l.jsx)("circle",{cx:17.512,cy:6.971,r:3.723,stroke:"currentColor",strokeLinejoin:"bevel",strokeMiterlimit:10}),(0,l.jsx)("path",{stroke:"currentColor",strokeLinejoin:"bevel",strokeMiterlimit:10,d:"m10.11 13.287 2.137 3.703-2.138 3.703H5.833L3.695 16.99l2.138-3.703h4.276Z"})]});var L=function(e){return(0,l.jsx)(E.Z,{src:(0,l.jsx)(D,{}),viewBox:"0 0 25 24",...e})},F=t(31840),A=t(1003);let T=e=>{let{value:s,onChange:t}=e;return(0,l.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,l.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"WHERE"}),(0,l.jsx)(A.Z,{disabled:!0,supportSelectAll:!0,size:"small",selectedSchemaName:s,onSelectSchema:t,className:"rounded-l-none [&>button>span>div]:py-0 w-64"})]})};var P=t(79378),I=t(30792),O=t(54511),W=t(72860),B=t(80203),H=t(16166),J=t(83314),U=t(38161),V=t(54073),G=t.n(V),Y=e=>{let{className:s,size:t="tiny",showError:r=!0,selectedSchemaName:a,selectedTableName:n,onSelectTable:o}=e,[c,d]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!1),{project:m}=(0,J.d2)(),[p,g]=(0,i.useState)(""),{data:f,isLoading:v,isSuccess:b,isError:y,error:N,refetch:w}=(0,U.H)({projectRef:null==m?void 0:m.ref,search:p,connectionString:null==m?void 0:m.connectionString,schema:a});(0,i.useEffect)(()=>{!x&&b&&h(!0)},[x,b]),(0,i.useEffect)(()=>{c||""===p||g("")},[c,p]);let k=G()(g),C=((null==f?void 0:f.pages[0].data.entities)?[...null==f?void 0:f.pages[0].data.entities]:[]).sort((e,s)=>e.name>s.name?0:-1);return(0,l.jsx)("div",{className:s,children:(0,l.jsxs)(j.J2,{open:c,onOpenChange:d,modal:!1,children:[(0,l.jsx)(j.xo,{asChild:!0,children:(0,l.jsx)(u.z,{size:t,type:"outline",disabled:v,className:"w-full [&>span]:w-full ".concat("small"===t?"py-1.5":""),icon:v?(0,l.jsx)(P.Z,{className:"animate-spin",size:12}):null,iconRight:(0,l.jsx)(I.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),children:x?(0,l.jsxs)("div",{className:"w-full flex space-x-3",children:[(0,l.jsx)("p",{className:"text-xs text-light",children:"table"}),(0,l.jsx)("p",{className:"text-xs",children:"*"===n?"All tables":n})]}):(0,l.jsx)("p",{className:"flex text-xs text-light",children:"Loading tables..."})})}),(0,l.jsx)(j.yk,{className:"p-0 w-64",side:"bottom",align:"start",children:(0,l.jsxs)(O.mY,{children:[(0,l.jsx)(O.sZ,{placeholder:"Find table...",onValueChange:e=>k(e)}),(0,l.jsxs)(O.e8,{children:[v&&(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 px-3 py-2",children:[(0,l.jsx)(P.Z,{className:"animate-spin",size:12}),(0,l.jsx)("p",{className:"flex text-xs text-light",children:"Loading tables..."})]}),r&&y&&(0,l.jsxs)(W.bZ,{variant:"warning",className:"!px-3 !py-3 !border-0 rounded-none",children:[(0,l.jsx)(W.Cd,{className:"text-xs text-amber-900",children:"Failed to load tables"}),(0,l.jsxs)(W.X,{className:"text-xs mb-2",children:["Error: ",null==N?void 0:N.message]}),(0,l.jsx)(u.z,{type:"default",size:"tiny",onClick:()=>w(),children:"Reload tables"})]}),b&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(O.fu,{forceMount:!0,children:(0,l.jsxs)(B.x,{className:(C||[]).length>7?"h-[210px]":"",children:[(0,l.jsx)(O.rb,{children:"No tables found"}),!p&&(0,l.jsxs)(O.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{o("*",void 0),d(!1)},onClick:()=>{o("*",void 0),d(!1)},children:[(0,l.jsx)("span",{children:"All tables"}),"*"===a&&(0,l.jsx)(H.Z,{className:"text-brand",strokeWidth:2})]},"all-tables"),null==C?void 0:C.map(e=>(0,l.jsxs)(O.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{o(e.name,e.id),d(!1)},onClick:()=>{o(e.name,e.id),d(!1)},children:[(0,l.jsx)("span",{children:e.name}),a===e.name&&(0,l.jsx)(H.Z,{className:"text-brand",strokeWidth:2})]},e.id))]})})})]})]})})]})})};let q=e=>{let{value:s,schema:t,onChange:r}=e;return(0,l.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,l.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"AND"}),(0,l.jsx)(Y,{selectedSchemaName:t,selectedTableName:s,onSelectTable:r,className:"w-64",size:"small"})]})};var K=t(83033);let Q=e=>{let{config:s,onChangeConfig:t}=e,[r,c]=(0,i.useState)(!1),[d,x]=(0,i.useState)(!1),[h,m]=(0,i.useState)(s),p=(0,a.Mk)(),f=(0,n.useRouter)(),v="*"!==s.table;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(j.J2,{open:r,onOpenChange:e=>{!0===e&&m(s),c(e)},children:[(0,l.jsx)(j.xo,{asChild:!0,children:(0,l.jsx)(u.z,{icon:(0,l.jsx)(k.Z,{size:"16"}),type:v?"primary":"dashed",className:(0,C.cn)("rounded-full px-1.5 text-xs",v?"!py-0.5":"!py-1"),size:"small",children:v?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mr-1",children:"Filtered by "}),(0,l.jsxs)(S.C,{variant:"brand",children:["table: ",s.table]})]}):(0,l.jsx)("span",{className:"mr-1",children:"Filter messages"})})}),(0,l.jsxs)(j.yk,{className:"p-0 w-[365px]",align:"start",children:[(0,l.jsx)("div",{className:"border-b border-overlay text-xs px-4 py-3 text-foreground",children:"Listen to event types"}),(0,l.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,l.jsx)(Z,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,l.jsx)("label",{htmlFor:"toggle-presence",className:"text-sm",children:"Presence"})]}),(0,l.jsx)(z.Z,{id:"toggle-presence",size:"tiny",checked:h.enablePresence,onChange:()=>m({...h,enablePresence:!h.enablePresence})})]}),(0,l.jsx)("p",{className:"text-xs text-foreground-light pt-1",children:"Store and synchronize user state consistently across clients"})]}),(0,l.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,l.jsx)(M,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,l.jsx)("label",{htmlFor:"toggle-broadcast",className:"text-sm",children:"Broadcast"})]}),(0,l.jsx)(z.Z,{id:"toggle-broadcast",size:"tiny",checked:h.enableBroadcast,onChange:()=>m({...h,enableBroadcast:!h.enableBroadcast})})]}),(0,l.jsx)("p",{className:"text-xs  text-foreground-light pt-1",children:"Send any data to any client subscribed to the same channel"})]}),(0,l.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,l.jsx)(L,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,l.jsx)("label",{htmlFor:"toggle-db-changes",className:"text-sm",children:"Database changes"})]}),(0,l.jsx)(z.Z,{id:"toggle-db-changes",size:"tiny",checked:h.enableDbChanges,onChange:()=>m({...h,enableDbChanges:!h.enableDbChanges})})]}),(0,l.jsx)("p",{className:"text-xs text-foreground-light pt-1",children:"Listen for Database inserts, updates, deletes and more"})]}),h.enableDbChanges&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-b border-overlay text-xs px-4 py-3 text-foreground",children:"Filter messages from database changes"}),(0,l.jsxs)("div",{className:"flex border-b border-overlay p-4 gap-y-2 flex-col",children:[(0,l.jsx)(T,{value:h.schema,onChange:e=>m({...h,schema:e,table:"*"})}),(0,l.jsx)(q,{value:h.table,schema:h.schema,onChange:e=>m({...h,table:e})})]}),(0,l.jsxs)("div",{className:"border-b border-overlay p-4 flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,l.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"AND"}),(0,l.jsx)(F.Z,{size:"tiny",className:"flex-grow",placeholder:"body=eq.hey",value:h.filter,onChange:e=>m({...h,filter:e.target.value})})]}),(0,l.jsxs)("p",{className:"text-xs text-foreground-light pl-[80px]",children:["Learn more about realtime filtering in"," ",(0,l.jsx)(g(),{className:"underline",target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/realtime/postgres-changes#available-filters",children:"our docs"})]})]})]}),(0,l.jsxs)("div",{className:"px-4 py-2 gap-2 flex justify-end",children:[(0,l.jsx)(u.z,{type:"default",onClick:()=>c(!1),children:"Cancel"}),(0,l.jsx)(u.z,{onClick:()=>x(!0),children:"Apply"})]})]})]}),(0,l.jsx)(K.Z,{title:"Previously found messages will be lost",variant:"destructive",confirmLabel:"Confirm",size:"small",visible:d,onCancel:()=>x(!1),onConfirm:()=>{o.Z.sendEvent({category:"realtime_inspector",action:"applied_filters",label:"realtime_inspector_config"},p,f),t(h),x(!1),c(!1)},children:(0,l.jsx)("p",{className:"text-sm text-foreground-light",children:"The realtime inspector will clear currently collected messages and start listening for new messages matching the updated filters."})})]})};var X=t(62202),$=t(23906),ee=t(67959),es=t(11255),et=t(76626),el=t(64308),er=t(50412);let ea=e=>{let{config:s,onChangeConfig:t}=e,{data:r}=(0,ee.q)({projectRef:s.projectRef}),c=(0,a.Mk)(),d=(0,n.useRouter)(),x=null==r?void 0:r.autoApiService,h=(null==x?void 0:x.service_api_keys.find(e=>"service_role key"===e.name))?x.serviceApiKey:void 0,u=(null==x?void 0:x.service_api_keys.find(e=>"anon key"===e.name))?x.serviceApiKey:void 0,{data:m}=(0,es.s)({projectRef:s.projectRef},{enabled:et.Qy}),p=null==m?void 0:m.jwt_secret,g=(0,er.fN)(),f=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{f.current&&o.Z.sendEvent({category:"realtime_inspector",action:"changed_database_role",label:"realtime_inspector_config"},c,d),f.current=!0},[g.role]),(0,i.useEffect)(()=>{let e;let l=null;void 0!==s.projectRef&&void 0!==p&&void 0!==g.role&&"postgrest"===g.role.type?(e=u,(0,el.Wn)(s.projectRef,p,g.role).then(e=>l=e).catch(e=>X.ZP.error("Failed to get JWT for role: ".concat(e.message)))):e=h,e&&t({...s,token:e,bearer:l})},[s.projectRef,p,h,g.role]),(0,l.jsx)($.Q,{align:"start",variant:"connected-on-both"})},en=e=>{let{config:s,onChangeConfig:t}=e,r=(0,a.Mk)(),i=(0,n.useRouter)();return(0,l.jsxs)("div",{className:"flex flex-row h-14 gap-2.5 items-center px-4",children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)(w,{config:s,onChangeConfig:t}),(0,l.jsx)(ea,{config:s,onChangeConfig:t}),(0,l.jsxs)(c.fC,{delayDuration:0,children:[(0,l.jsx)(c.xz,{asChild:!0,children:(0,l.jsx)(u.z,{size:"tiny",type:s.enabled?"warning":"primary",className:"rounded-l-none border-l-0",disabled:0===s.channelName.length,icon:s.enabled?(0,l.jsx)(x,{size:"16"}):(0,l.jsx)(h,{size:"16"}),onClick:()=>{t({...s,enabled:!s.enabled}),s.enabled||o.Z.sendEvent({category:"realtime_inspector",action:"started_listening",label:"realtime_inspector_config"},r,i)},children:s.enabled?"Stop listening":"Start listening"})}),0===s.channelName.length&&(0,l.jsx)(c.h_,{children:(0,l.jsxs)(c.VY,{side:"bottom",children:[(0,l.jsx)(c.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,l.jsx)("span",{className:"text-xs text-foreground",children:"You'll need to join a channel first"})})]})})]})]}),(0,l.jsx)(Q,{config:s,onChangeConfig:t})]})};var ei=t(18149),eo=t.n(ei),ec=t(47716);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ed=(0,d.Z)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);var ex=t(47370),eh=t(39127),eu=t(38210),em=t(9019),ep=t(26518),eg=t(28879),ef=t.n(eg);let ej=e=>ef().unix(Number(e)/1e3).toISOString(),ev=e=>{let{children:s}=e;return(0,l.jsx)("div",{className:"flex h-full w-full items-center gap-4",children:s})},eb=e=>{let{value:s,hideCopy:t=!1}=e;return(0,l.jsx)(ey,{label:"Timestamp",value:ej(s),hideCopy:t})},ey=e=>{let{label:s,value:t,valueRender:r,hideCopy:a=!1}=e;return(0,l.jsxs)("div",{className:"grid grid-cols-12 group",children:[(0,l.jsx)("span",{className:"text-scale-900 text-sm col-span-4 whitespace-pre-wrap",children:s}),(0,l.jsx)("span",{className:"text-scale-1200 text-sm col-span-6 whitespace-pre-wrap break-all",children:null!=r?r:t}),!a&&(0,l.jsx)(ep.Z,{text:t,className:"group-hover:opacity-100 opacity-0 my-auto transition col-span-2  h-4 w-4 px-0 py-0",type:"text",title:"Copy to clipboard"})]})},eN=()=>(0,l.jsx)("div",{className:"h-px w-full bg-panel-border-interior-light [[data-theme*=dark]_&]:bg-panel-border-interior-dark"}),ew=e=>{let{log:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"px-8",children:[(0,l.jsx)("span",{className:"col-span-4 text-sm text-scale-900",children:"Message"}),(0,l.jsx)("p",{className:"text-wrap mt-2 overflow-x-auto whitespace-pre-wrap font-mono text-xs text-scale-1200",children:s.message})]}),(0,l.jsx)(eN,{}),(0,l.jsx)("div",{className:"px-8 space-y-2",children:(0,l.jsx)(eb,{hideCopy:!0,value:s.timestamp})}),(0,l.jsx)(eN,{}),(0,l.jsxs)("div",{className:"px-8",children:[(0,l.jsx)("h3",{className:"mb-4 text-sm text-foreground-lighter",children:"Metadata"}),(0,l.jsx)("pre",{className:"syntax-highlight overflow-x-auto text-sm",children:(0,l.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:s.metadata?JSON.stringify(s.metadata,null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var s="number text-tomato-900";return/^"/.test(e)?s=/:$/.test(e)?"key text-scale-1200":"string text-brand-600":/true|false/.test(e)?s="boolean text-blue-900":/null/.test(e)&&(s="null text-amber-1100"),'<span class="'+s+'">'+e+"</span>"}).split("\n").map(e=>'<span class="line text-xs">'.concat(e,"</span>")).join("\n"):""}})})]})]})};var ek=e=>{let{log:s,onClose:t}=e,r=(0,a.Mk)(),c=(0,n.useRouter)(),d=(0,i.useMemo)(()=>JSON.stringify(s,null,2),[s]);return(0,l.jsxs)("div",{className:(0,C.cn)("relative flex h-full flex-grow flex-col border-l border-t-2 overflow-y-scroll bg-gray-200"),children:[(0,l.jsx)("div",{className:(0,C.cn)("absolute flex h-full w-full flex-col items-center justify-center gap-2 bg-scale-200 text-center opacity-0 transition-all",s?"z-0 opacity-0":"z-10 opacity-100"),children:(0,l.jsxs)("div",{className:(0,C.cn)("flex w-full max-w-sm scale-95 flex-col items-center justify-center gap-6 text-center opacity-0 transition-all delay-300 duration-500",s?"mt-0 scale-95 opacity-0":"mt-8 scale-100 opacity-100"),children:[(0,l.jsxs)("div",{className:"relative flex h-4 w-32 items-center rounded border border-default px-2",children:[(0,l.jsx)("div",{className:"h-0.5 w-2/3 rounded-full bg-overlay-hover"}),(0,l.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("h3",{className:"text-sm text-foreground",children:"Select an message"}),(0,l.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Click on a message on the left to view details."})]})]})}),(0,l.jsxs)("div",{className:"relative h-px flex-grow",children:[(0,l.jsxs)("div",{className:"pt-4 flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"px-4 flex flex-row justify-between items-center",children:[(0,l.jsx)("div",{className:"transition",children:(0,l.jsx)(ep.Z,{text:d,type:"default",title:"Copy log to clipboard",onClick:()=>{o.Z.sendEvent({category:"realtime_inspector",action:"copied_message",label:"realtime_inspector_results"},r,c)}})}),(0,l.jsx)(u.z,{type:"text",className:"cursor-pointer transition hover:text-scale-1200 h-8 w-8 px-0 py-0 flex items-center justify-center",onClick:t,children:(0,l.jsx)(em.Z,{size:14,strokeWidth:2,className:"text-scale-900"})})]}),(0,l.jsx)("div",{className:"h-px w-full bg-scale-600 rounded"})]}),(0,l.jsx)("div",{className:"flex flex-col space-y-6 py-4",children:s&&(0,l.jsx)(ew,{log:s})})]})]})},eC=()=>(0,l.jsxs)("div",{className:"border bg-studio border-border rounded-md justify-start items-center flex flex-col w-10/12 relative",children:[(0,l.jsx)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b rounded-t-md",children:(0,l.jsxs)("div",{className:"grow flex-col flex gap-y-1",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Join a channel to start listening to messages"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Channels are the building blocks of realtime where clients can bi-directionally send and receive messages in."})]})}),(0,l.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex rounded-b-md",children:[(0,l.jsxs)("div",{className:"grow flex-col flex",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Not sure what to do?"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Browse our documentation"})]}),(0,l.jsx)(u.z,{type:"default",iconRight:(0,l.jsx)(eh.Z,{}),children:(0,l.jsx)("a",{href:"https://supabase.com/docs/guides/realtime",target:"_blank",rel:"noreferrer",children:"Documentation"})})]})]}),eS=t(66105);let eE={PRESENCE:(0,l.jsx)(Z,{size:"xlarge"}),BROADCAST:(0,l.jsx)(M,{size:"xlarge"}),POSTGRES:(0,l.jsx)(L,{size:"xlarge"}),SYSTEM:(0,l.jsx)(eS.Z,{size:"large"})},e_=[{name:"timestamp-with-truncated-text",key:"main-column",renderCell:e=>{let s=e.row.message;return(0,l.jsxs)(ev,{children:[(0,l.jsx)("div",{className:(0,C.cn)("flex justify-center items-center min-w-[24px]",eZ(e.row)?"text-warning-600":"text-green-900"),children:eE[s]}),(0,l.jsx)("span",{className:(0,C.cn)("font-mono",eZ(e.row)?"!text-warning-600":""),children:new Date(e.row.timestamp).toISOString()}),(0,l.jsx)("span",{className:(0,C.cn)("truncate font-mono",eZ(e.row)?"!text-warning-600":""),children:JSON.stringify(e.row.metadata)})]})}}],eZ=e=>{var s;return"SYSTEM"===e.message&&(null===(s=e.metadata)||void 0===s?void 0:s.status)==="error"},ez=e=>{let{enabled:s,hasChannelSet:t,showSendMessage:r}=e,{ref:n}=(0,a.UO)();return(0,l.jsx)("div",{className:"w-full max-w-md flex items-center flex-col",children:t?(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)("p",{className:"text-foreground",children:"No Realtime messages found"}),(0,l.jsx)("p",{className:"text-foreground-lighter",children:"Realtime message logs will be shown here"}),(0,l.jsxs)("div",{className:"mt-4 border bg-surface-100 border-border rounded-md justify-start items-center flex flex-col w-full",children:[(0,l.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,l.jsx)(M,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,l.jsxs)("div",{className:"grow flex-col flex",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Create a Broadcast message"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Send a message in the channel"})]}),(0,l.jsx)(u.z,{type:"default",onClick:r,children:"Broadcast a message"})]}),(0,l.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,l.jsx)(Z,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,l.jsxs)("div",{className:"grow flex-col flex",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Join from another browser tab"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Send messages between multiple clients"})]}),(0,l.jsx)(g(),{href:"/project/".concat(n,"/realtime/inspector"),target:"_blank",rel:"noreferrer",children:(0,l.jsx)(u.z,{type:"default",iconRight:(0,l.jsx)(eh.Z,{}),children:"Open inspector"})})]}),(0,l.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,l.jsx)(L,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,l.jsxs)("div",{className:"grow flex-col flex",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Listen to a table for changes"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Tables must have realtime enabled"})]}),(0,l.jsx)(g(),{href:"/project/".concat(n,"/database/replication"),target:"_blank",rel:"noreferrer",children:(0,l.jsx)(u.z,{type:"default",iconRight:(0,l.jsx)(eh.Z,{}),children:"Replication settings"})})]}),(0,l.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex rounded-b-md bg-studio",children:[(0,l.jsxs)("div",{className:"grow flex-col flex",children:[(0,l.jsx)("p",{className:"text-foreground",children:"Not sure what to do?"}),(0,l.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Browse our documentation"})]}),(0,l.jsx)(u.z,{type:"default",iconRight:(0,l.jsx)(eh.Z,{}),children:(0,l.jsx)("a",{href:"https://supabase.com/docs/guides/realtime",target:"_blank",rel:"noreferrer",children:"Documentation"})})]})]})]}):(0,l.jsx)(eC,{})})},eR=(e,s)=>(0,l.jsx)(ex.X2,{...s,isRowSelected:!1,selectedCellIdx:void 0},e);var eM=e=>{let{enabled:s,hasChannelSet:t,data:r=[],showSendMessage:c}=e,[d,x]=(0,i.useState)(null),h=JSON.stringify(r),m=(0,a.Mk)(),p=(0,n.useRouter)();return((0,i.useEffect)(()=>{r&&(r.find(e=>e.id===(null==d?void 0:d.id))||x(null))},[h]),r)?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("section",{className:"flex w-full flex-col",style:{maxHeight:"calc(100vh - 42px - 3rem)"},children:[(0,l.jsx)(eu.Z,{active:s}),(0,l.jsxs)("div",{className:(0,C.cn)("flex h-full flex-row",s?"border-brand-400":null),children:[(0,l.jsxs)("div",{className:"flex flex-grow flex-col",children:[s&&(0,l.jsxs)("div",{className:"w-full h-9 px-4 bg-surface-100 border-b items-center inline-flex justify-between text-foreground-light",children:[(0,l.jsxs)("div",{className:"inline-flex gap-2.5 text-xs",children:[(0,l.jsx)(ec.Z,{size:"16",className:"animate-spin"}),(0,l.jsx)("div",{children:"Listening"}),(0,l.jsx)("div",{children:"•"}),(0,l.jsx)("div",{children:r.length>0?r.length>=100?"Found a large number of messages, showing only the latest 100...":"Found ".concat(r.length," messages..."):"No message found yet..."})]}),(0,l.jsx)(u.z,{type:"default",onClick:c,icon:(0,l.jsx)(ed,{size:14,strokeWidth:1.5}),children:(0,l.jsx)("span",{children:"Broadcast a message"})})]}),(0,l.jsx)(ex.ZP,{className:"data-grid--simple-logs h-full border-b-0",rowHeight:40,headerRowHeight:0,onSelectedCellChange:e=>{let{rowIdx:s}=e;o.Z.sendEvent({category:"realtime_inspector",action:"focused-specific-message",label:"realtime_inspector_results"},m,p),x(r[s])},selectedRows:new Set([]),columns:e_,rowClass:e=>(0,C.cn)(["font-mono tracking-tight",eo()(e,d)?"bg-scale-800 rdg-row--focused":" bg-scale-200 hover:bg-scale-300 cursor-pointer",eZ(e)&&"!bg-warning-300"]),rows:r,rowKeyGetter:e=>e.id,renderers:{renderRow:eR,noRowsFallback:(0,l.jsx)("div",{className:"mx-auto flex h-full w-full items-center justify-center space-y-12 py-4 transition-all delay-200 duration-500",children:(0,l.jsx)(ez,{enabled:s,hasChannelSet:t,showSendMessage:c})})}})]}),(0,l.jsx)("div",{className:"flex w-1/2 flex-col",children:(0,l.jsx)(ek,{onClose:()=>x(null),log:d})})]})]})}):null},eD=t(89796),eL=t(73648),eF=t(5388);let eA={message:"Test message",payload:'{ "message": "Hello World" }'},eT=e=>{let{visible:s,onSelectCancel:t,onSelectConfirm:r}=e,[a,n]=(0,i.useState)(),[o,c]=(0,i.useState)(eA);return(0,i.useEffect)(()=>{s&&(n(void 0),c(eA))},[s]),(0,l.jsx)(eD.C,{size:"medium",alignFooter:"right",header:"Broadcast a message to all clients",visible:s,loading:!1,onCancel:t,onConfirm:()=>{let e=(0,eF.dW)(o.payload);void 0===e?n("Please provide a valid JSON"):r({...o,payload:e})},children:(0,l.jsx)(eD.C.Content,{children:(0,l.jsxs)("div",{className:"py-4 flex flex-col gap-y-4",children:[(0,l.jsx)(F.Z,{label:"Message name",size:"small",className:"flex-grow",value:o.message,onChange:e=>c({...o,message:e.target.value})}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Message payload"}),(0,l.jsx)(eL.pq,{id:"message-payload",language:"json",className:"!mb-0 h-32 overflow-hidden rounded border",onInputChange:e=>c({...o,payload:null!=e?e:"{}"}),options:{wordWrap:"off",contextmenu:!1},value:o.payload}),void 0!==a&&(0,l.jsx)("p",{className:"text-sm text-red-900",children:a})]})]})})})};var eP=t(56627),eI=t(829),eO=t.n(eI),eW=t(85701),eB=t.n(eW),eH=t(37185),eJ=t(34406);function eU(e,s){return"clear"===s.type?eH.Z6:eB()(eO()([{id:(0,eF.k$)(),timestamp:new Date().getTime(),message:s.payload.messageType,metadata:s.payload.metadata},...e],e=>-e.timestamp),100)}let eV=e=>{let{enabled:s,channelName:t,projectRef:l,logLevel:r,token:a,schema:n,table:o,filter:c,bearer:d,enablePresence:x,enableDbChanges:h,enableBroadcast:u}=e,{data:m}=(0,ee.q)({projectRef:l}),p=m?"".concat(m.autoApiService.protocol,"://").concat(m.autoApiService.endpoint):"https://".concat(l,".supabase.co"),[g,f]=(0,i.useReducer)(eU,[]),j=(e,s)=>{f({type:"add",payload:{messageType:e,metadata:s}})},[v,b]=(0,i.useState)(),[y,N]=(0,i.useState)();return(0,i.useEffect)(()=>{if(!s)return;let e={global:{headers:{"User-Agent":"supabase-api/".concat(eJ.env.VERCEL_GIT_COMMIT_SHA||"unknown-sha")}},realtime:{params:{log_level:r}}},t=new eP.Z(p,a,e);return""!=d&&t.realtime.setAuth(d),b(t),()=>{null==v||v.realtime.disconnect(),b(void 0)}},[s,d,p,r,a]),(0,i.useEffect)(()=>{if(!v)return;f({type:"clear"});let e=null==v?void 0:v.channel(t,{config:{broadcast:{self:!0}}});if(e.on("system",{},e=>{j("SYSTEM",e)}),u&&e.on("broadcast",{event:"*"},e=>j("BROADCAST",e)),x&&e.on("presence",{event:"*"},e=>{j("PRESENCE",e)}),h){let s={event:"*",schema:n,table:o,filter:void 0};""!==c&&(s.filter=c),e.on("postgres_changes",s,e=>{let s=performance.now()+performance.timeOrigin,t=Date.parse(e.commit_timestamp);j("POSTGRES",{...e,latency:s-t})})}return e.subscribe(async(s,t)=>{"SUBSCRIBED"===s&&x&&e.send({type:"presence",event:"TRACK",payload:{name:"user_name_"+Math.floor(100*Math.random()),t:performance.now()}})}),N(e),()=>{e.unsubscribe(),N(void 0)}},[v,t,u,h,x,c,p,n,o]),{logData:g,sendMessage:(0,i.useCallback)(async(e,s,t)=>{y?"error"===await y.send({type:"broadcast",event:e,payload:s})?X.ZP.error("Failed to broadcast message"):(X.ZP.success("Successfully broadcasted message"),t()):X.ZP.error("Failed to broadcast message: channel has not been set")},[y])}},eG=()=>{let{ref:e}=(0,a.UO)(),s=(0,a.Mk)(),t=(0,n.useRouter)(),[r,c]=(0,i.useState)(!1),[d,x]=(0,i.useState)({enabled:!1,projectRef:e,channelName:"",logLevel:"info",token:"",schema:"public",table:"*",filter:void 0,bearer:null,enablePresence:!0,enableDbChanges:!0,enableBroadcast:!0}),{logData:h,sendMessage:u}=eV(d);return(0,l.jsxs)("div",{className:"flex flex-col grow h-full",children:[(0,l.jsx)(en,{config:d,onChangeConfig:x}),(0,l.jsx)("div",{className:"relative flex flex-col grow",children:(0,l.jsx)("div",{className:"flex grow",children:(0,l.jsx)(eM,{hasChannelSet:d.channelName.length>0,enabled:d.enabled,data:h,showSendMessage:()=>c(!0)})})}),(0,l.jsx)(eT,{visible:r,onSelectCancel:()=>c(!1),onSelectConfirm:e=>{o.Z.sendEvent({category:"realtime_inspector",action:"send_broadcast_message",label:"realtime_inspector_results"},s,t),u(e.message,e.payload,()=>c(!1))}})]})};var eY=t(53071),eq=t(13096),eK=t(3593);let eQ=e=>{var s;let t=null!==(s=null==e?void 0:e.ref)&&void 0!==s?s:"default";return[{title:"Realtime",items:[{name:"Inspector",key:"inspector",url:"/project/".concat(t,"/realtime/inspector"),items:[]}]}]};var eX=(0,eq.QO)(e=>{let{children:s}=e,t=(0,eq.Vm)(),r=(0,n.useRouter)().pathname.split("/")[4];return(0,l.jsx)(eK.AM,{isLoading:!1,product:"Realtime",productMenu:(0,l.jsx)(eY.Q,{page:r,menu:eQ(t)}),children:s})}),e$=t(47203);let e0=()=>(0,eq.Xo)(r.KA.READ,"service_api_keys")?(0,l.jsx)(eG,{}):(0,l.jsx)(e$.Z,{isFullPage:!0,resourceText:"access your project's realtime functionalities"});e0.getLayout=e=>(0,l.jsx)(eX,{title:"Realtime",children:e});var e1=e0}},function(e){e.O(0,[667,9678,8183,8421,3844,3145,8286,3517,5022,6751,1421,5573,1761,5232,2550,6206,4056,3501,7689,6647,6909,5952,1685,9298,9774,2888,179],function(){return e(e.s=86350)}),_N_E=e.O()}]);